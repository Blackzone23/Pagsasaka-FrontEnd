import{B as i}from"./BaseLabel-DnDVLF1Z.js";import{_ as c}from"./BaseInputField-D7-GfNU_.js";import{L,T as R}from"./Toast-BXauPSI2.js";import"./lodash-9wNbgOht.js";import{A as S,i as I,f as x,D as j,g as z,p as O,c as V,E as Y,l as P,a as o,b as s,t as b,w as m,u as A,I as T,F as $,j as q,o as y,e as u}from"./index-DRxrXVja.js";/* empty css                                                              */const G={class:"h-screen bg-gray-300"},H={class:"flex justify-center px-4"},J={class:"w-full sm:w-3/4 md:w-2/3 lg:w-1/2 xl:w-2/5 2xl:w-2/5 p-4 mt-[150px] sm:p-6 bg-white shadow-lg rounded-lg"},K={class:"text-center"},Q=["src"],W={class:"mt-4 text-base sm:text-lg md:text-xl font-semibold"},X={class:"text-gray-600 text-xs sm:text-sm md:text-base"},Z={class:"text-gray-600 text-xs sm:text-sm md:text-base"},ee={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center px-4 z-50"},se={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-sm sm:max-w-md"},te={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 px-4"},ae={class:"bg-white rounded-xl p-6 w-full max-w-sm sm:max-w-md max-h-[90vh] overflow-y-auto shadow-lg"},oe={class:"space-y-4"},le={class:"relative"},re={class:"relative"},fe={__name:"Administrator_Profile",setup(ne){const n=I();q();const l=S(()=>{var d;return((d=n.state.userData.data)==null?void 0:d.user)||{}}),p=x(!1),a=j({first_name:"",middle_name:"",last_name:"",email:"",phone_number:""}),k=()=>{a.first_name=l.value.first_name||"",a.middle_name=l.value.middle_name||"",a.last_name=l.value.last_name||"",a.email=l.value.email||"",a.phone_number=l.value.phone_number||""};z(k),O(l,k);const M=async()=>{var d,e;p.value=!0;try{const t=await n.dispatch("updateProfile",{id:l.value.id,first_name:a.first_name,middle_name:a.middle_name,last_name:a.last_name,phone_number:a.phone_number,email:a.email});C()}catch(t){if(p.value=!1,(e=(d=t.response)==null?void 0:d.data)!=null&&e.errors){const f=t.response.data.errors,w=Object.keys(f)[0];w&&n.dispatch("showToast",{message:f[w][0],type:"error"})}else console.error("Error updating profile:",t),n.dispatch("showToast",{message:"An unexpected error occurred.",type:"error"})}finally{p.value=!1}},_=x(!1),N=()=>{_.value=!0},C=()=>{_.value=!1},r=j({password:"",password_confirmation:""}),g=x(!1),U=()=>{g.value=!g.value},v=x(!1),B=()=>{v.value=!v.value},h=x(!1),D=()=>{h.value=!0},E=()=>{h.value=!1},F=async()=>{var d,e;p.value=!0;try{if(r.password!==r.password_confirmation){n.dispatch("showToast",{message:"Passwords do not match",type:"error"});return}await n.dispatch("updatePassword",{id:l.value.id,password:r.password,password_confirmation:r.password_confirmation}),E(),r.password="",r.password_confirmation="",n.dispatch("showToast",{message:"Password updated successfully!",type:"success"})}catch(t){if(p.value=!1,(e=(d=t.response)==null?void 0:d.data)!=null&&e.errors){const f=t.response.data.errors,w=Object.keys(f)[0];w&&n.dispatch("showToast",{message:f[w][0],type:"error"})}else console.error("Error updating password:",t),n.dispatch("showToast",{message:"An unexpected error occurred.",type:"error"})}finally{p.value=!1}};return(d,e)=>(y(),V($,null,[p.value?(y(),Y(L,{key:0,class:"loading"})):P("",!0),o(R),s("div",G,[s("div",H,[s("div",J,[s("div",K,[s("img",{src:l.value.profilePic,alt:"Profile Picture",class:"mx-auto rounded-full w-24 h-24 sm:w-32 sm:h-32 md:w-36 md:h-36 lg:w-40 lg:h-40 xl:w-44 xl:h-44 2xl:w-48 2xl:h-48"},null,8,Q),s("h2",W,b(l.value.first_name)+" "+b(l.value.middle_name)+" "+b(l.value.last_name),1),s("p",X,b(l.value.email),1),s("p",Z,b(l.value.phone_number),1)]),s("div",{class:"flex flex-col sm:flex-row justify-center items-center gap-3 mt-6 sm:mt-10 text-sm"},[s("button",{onClick:N,class:"w-full sm:w-auto px-6 py-2 bg-green-800 text-white rounded-full hover:bg-green-600 transition"}," Edit Profile "),s("button",{onClick:D,class:"w-full sm:w-auto px-6 py-2 bg-red-700 text-white rounded-full hover:bg-red-500 transition"}," Change Password ")])])]),_.value?(y(),V("div",ee,[s("div",se,[o(i,{class:"text-lg sm:text-xl font-semibold mb-4"},{default:m(()=>e[7]||(e[7]=[u("Edit Profile")])),_:1}),o(i,{class:"block mb-2"},{default:m(()=>e[8]||(e[8]=[u("First Name")])),_:1}),o(c,{modelValue:a.first_name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.first_name=t),class:"w-full mb-4",type:"text"},null,8,["modelValue"]),o(i,{class:"block mb-2"},{default:m(()=>e[9]||(e[9]=[u("Middle Initial")])),_:1}),o(c,{modelValue:a.middle_name,"onUpdate:modelValue":e[1]||(e[1]=t=>a.middle_name=t),class:"w-full mb-4",type:"text"},null,8,["modelValue"]),o(i,{class:"block mb-2"},{default:m(()=>e[10]||(e[10]=[u("Last Name")])),_:1}),o(c,{modelValue:a.last_name,"onUpdate:modelValue":e[2]||(e[2]=t=>a.last_name=t),class:"w-full mb-4",type:"text"},null,8,["modelValue"]),o(i,{class:"block mb-2"},{default:m(()=>e[11]||(e[11]=[u("Email")])),_:1}),o(c,{modelValue:a.email,"onUpdate:modelValue":e[3]||(e[3]=t=>a.email=t),class:"w-full mb-4",type:"email"},null,8,["modelValue"]),o(i,{class:"block mb-2"},{default:m(()=>e[12]||(e[12]=[u("Phone")])),_:1}),o(c,{modelValue:a.phone_number,"onUpdate:modelValue":e[4]||(e[4]=t=>a.phone_number=t),class:"w-full mb-4",type:"text"},null,8,["modelValue"]),s("div",{class:"flex justify-end gap-2 text-sm"},[s("button",{onClick:C,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:M,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])):P("",!0),h.value?(y(),V("div",te,[s("div",ae,[e[15]||(e[15]=s("h2",{class:"text-lg font-semibold mb-4"},"Change Password",-1)),s("div",oe,[s("div",le,[o(i,{class:"font-semibold"},{default:m(()=>e[13]||(e[13]=[u("*New Password")])),_:1}),o(c,{modelValue:r.password,"onUpdate:modelValue":e[5]||(e[5]=t=>r.password=t),type:g.value?"text":"password",placeholder:"Enter Your Password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:U},[o(A(T),{icon:g.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",re,[o(i,{class:"font-semibold"},{default:m(()=>e[14]||(e[14]=[u("*Re-enter Password")])),_:1}),o(c,{modelValue:r.password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=t=>r.password_confirmation=t),type:v.value?"text":"password",placeholder:"Re-enter password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:B},[o(A(T),{icon:v.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",{class:"flex justify-end space-x-2"},[s("button",{type:"button",onClick:E,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:F,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])])):P("",!0)])],64))}};export{fe as default};
