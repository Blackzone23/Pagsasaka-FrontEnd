import{B as i}from"./BaseLabel-D2ElbQSy.js";import{_ as m}from"./BaseInputField-N3b9a-_s.js";import{L as I,T as O}from"./Toast-By9_4bum.js";import"./lodash-B1LumzEa.js";import{A as T,i as z,D as L,f,c as _,E as Y,l as y,a,b as s,u as V,I as C,t as b,w as d,F as $,j as q,o as w,e as u}from"./index-DBPCak3D.js";/* empty css                                                              */const G={class:"bg-[#285a19] shadow p-4 flex justify-between items-center text-white"},H={class:"flex items-center space-x-4"},J={class:"relative inline-block text-left"},K={class:"flex items-center space-x-2"},Q=["src"],W={key:0,class:"absolute right-0 z-50 mt-2 w-48 bg-white rounded shadow-lg"},X={class:"w-full h-[727px] flex items-center justify-center bg-gray-200 px-4 sm:px-6 lg:px-8"},Z={class:"w-1/2 max-w-4xl p-6 bg-white shadow-lg rounded-lg"},ee={class:"text-center"},se=["src"],te={class:"mt-4 text-lg sm:text-xl font-semibold"},oe={class:"text-gray-600 text-sm sm:text-base"},le={class:"text-gray-600 text-sm sm:text-base"},ae={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center px-4"},re={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md relative"},ne={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ie={class:"bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto shadow-lg"},de={class:"space-y-3"},ue={class:"relative"},me={class:"relative"},ve={__name:"Seller_Profile",setup(ce){const x=z(),M=q(),t=T(()=>{var r;return((r=x.state.userData.data)==null?void 0:r.user)||{}}),l=L({first_name:t.value.first_name||"",middle_name:t.value.middle_name||"",last_name:t.value.last_name||"",email:t.value.email||"",phone_number:t.value.phone_number||""}),N=async()=>{var r,e;try{await x.dispatch("updateProfile",{id:t.value.id,first_name:l.first_name,middle_name:l.middle_name,last_name:l.last_name,phone_number:l.phone_number,email:l.email}),t.value.first_name=l.first_name,t.value.middle_name=l.middle_name,t.value.last_name=l.last_name,t.value.phone_number=l.phone_number,t.value.email=l.email,j()}catch(o){if((e=(r=o.response)==null?void 0:r.data)!=null&&e.errors){const c=o.response.data.errors,p=Object.keys(c)[0];p&&alert(c[p][0])}else console.error("Error updating profile:",o),alert("An unexpected error occurred.")}},h=f(!1),U=()=>{h.value=!0};function j(){h.value=!1}const n=L({password:t.value.password||"",password_confirmation:t.value.password_confirmation||""}),g=f(!1),B=()=>{g.value=!g.value},v=f(!1),D=()=>{v.value=!v.value},k=f(!1),S=()=>{k.value=!0},E=()=>{k.value=!1},F=async()=>{var r,e;try{if(n.password!==n.password_confirmation){alert("Passwords do not match");return}await x.dispatch("updatePassword",{id:t.value.id,password:n.password,password_confirmation:n.password_confirmation}),E(),n.password="",n.password_confirmation=""}catch(o){if((e=(r=o.response)==null?void 0:r.data)!=null&&e.errors){const c=o.response.data.errors,p=Object.keys(c)[0];p&&alert(c[p][0])}else console.error("Error updating password:",o),alert("An unexpected error occurred.")}},P=f(!1),A=()=>{P.value=!P.value},R=async()=>{try{(await x.dispatch("logout")).isSuccess&&M.push({name:"Login"})}catch(r){console.error("Logout error:",r)}};return(r,e)=>(w(),_($,null,[r.showLoading?(w(),Y(I,{key:0,class:"loading"})):y("",!0),a(O),s("header",G,[e[8]||(e[8]=s("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"My Profile",-1)),s("div",H,[s("div",J,[s("div",K,[s("img",{src:t.value.avatar,alt:"Profile",class:"w-10 h-10 rounded-full object-cover shadow-md"},null,8,Q),a(V(C),{icon:"uil:setting",width:"24",height:"24",class:"cursor-pointer text-white",onClick:A})]),P.value?(w(),_("div",W,[e[7]||(e[7]=s("a",{href:"/seller-profile",class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"}," Account Info ",-1)),s("button",{onClick:R,class:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100"}," Logout ")])):y("",!0)])])]),s("div",X,[s("div",Z,[s("div",ee,[s("img",{src:t.value.profilePic,alt:"Profile Picture",class:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-44 lg:h-44 mx-auto rounded-full"},null,8,se),s("h2",te,b(t.value.first_name)+" "+b(t.value.middle_name)+" "+b(t.value.last_name),1),s("p",oe,b(t.value.email),1),s("p",le,b(t.value.phone_number),1)]),s("div",{class:"flex justify-center gap-4 text-xs mt-6 sm:mt-10"},[s("button",{onClick:U,class:"px-6 max-w-xs sm:max-w-sm lg:max-w-md bg-green-800 text-white py-2 rounded-full hover:bg-green-600"}," Edit Profile "),s("button",{class:"bg-red-700 text-white px-2 py-2 rounded-full hover:bg-red-500 transition",onClick:S}," Change Password")])])]),h.value?(w(),_("div",ae,[s("div",re,[a(i,{class:"text-xl font-semibold mb-4"},{default:d(()=>e[9]||(e[9]=[u("Edit Profile")])),_:1}),a(i,{class:"block mb-2"},{default:d(()=>e[10]||(e[10]=[u("First Name")])),_:1}),a(m,{modelValue:l.first_name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.first_name=o),class:"w-full p-2 border rounded mb-4",type:"text"},null,8,["modelValue"]),a(i,{class:"block mb-2"},{default:d(()=>e[11]||(e[11]=[u("Middle Name")])),_:1}),a(m,{modelValue:l.middle_name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.middle_name=o),class:"w-full p-2 border rounded mb-4",type:"text"},null,8,["modelValue"]),a(i,{class:"block mb-2"},{default:d(()=>e[12]||(e[12]=[u("Last Name")])),_:1}),a(m,{modelValue:l.last_name,"onUpdate:modelValue":e[2]||(e[2]=o=>l.last_name=o),class:"w-full p-2 border rounded mb-4",type:"text"},null,8,["modelValue"]),a(i,{class:"block mb-2"},{default:d(()=>e[13]||(e[13]=[u("Email")])),_:1}),a(m,{modelValue:l.email,"onUpdate:modelValue":e[3]||(e[3]=o=>l.email=o),class:"w-full p-2 border rounded mb-4",type:"email"},null,8,["modelValue"]),a(i,{class:"block mb-2"},{default:d(()=>e[14]||(e[14]=[u("Phone")])),_:1}),a(m,{modelValue:l.phone_number,"onUpdate:modelValue":e[4]||(e[4]=o=>l.phone_number=o),class:"w-full p-2 border rounded mb-4",type:"text"},null,8,["modelValue"]),s("div",{class:"flex justify-end gap-2 text-sm"},[s("button",{onClick:j,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:N,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])):y("",!0),k.value?(w(),_("div",ne,[s("div",ie,[e[17]||(e[17]=s("h2",{class:"text-lg font-semibold mb-4"},"Change Password",-1)),s("div",de,[s("div",ue,[a(i,{class:"font-semibold"},{default:d(()=>e[15]||(e[15]=[u("*New Password")])),_:1}),a(m,{modelValue:n.password,"onUpdate:modelValue":e[5]||(e[5]=o=>n.password=o),type:g.value?"text":"password",placeholder:"Enter Your Password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:B},[a(V(C),{icon:g.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",me,[a(i,{class:"font-semibold"},{default:d(()=>e[16]||(e[16]=[u("*Re-enter Password")])),_:1}),a(m,{modelValue:n.password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=o=>n.password_confirmation=o),type:v.value?"text":"password",placeholder:"Re-enter password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:D},[a(V(C),{icon:v.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",{class:"flex justify-end space-x-2 pt-2"},[s("button",{type:"button",onClick:E,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:F,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])])):y("",!0)],64))}};export{ve as default};
