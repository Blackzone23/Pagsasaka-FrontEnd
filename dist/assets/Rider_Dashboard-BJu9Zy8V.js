import{_ as J,A as m,i as K,D as L,f as p,g as X,c as n,E as R,l as c,a as y,b as t,u as g,I as F,t as o,e as S,G as H,Q as Z,H as tt,F as v,h as I,w as st,j as et,o as l}from"./index-B8b6vpke.js";import{L as at,T as ot}from"./Toast-S2wpvofn.js";import{c as rt,r as lt,u as xt,B as it}from"./BaseError-BBHvMZ_b.js";const nt={class:"bg-[#285a19] shadow p-4 flex justify-between items-center text-white"},dt={class:"relative inline-block text-left"},mt={class:"flex items-center space-x-1 sm:space-x-2"},ct=["src"],ut={key:0,class:"absolute right-0 z-50 mt-2 w-40 sm:w-48 bg-white rounded shadow-lg"},pt={class:"flex min-h-screen"},gt={class:"flex-1 p-2 xs:p-4 sm:p-6"},bt={class:"p-2 xs:p-3 sm:p-4"},ht={class:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 xs:gap-3 sm:gap-4"},ft={class:"bg-white p-3 xs:p-4 rounded-lg shadow-md border border-gray-200"},yt={class:"text-lg xs:text-xl sm:text-2xl font-bold text-green-800"},vt={class:"p-1 xs:p-3 sm:p-4"},_t={key:0,class:"p-2 xs:p-3 sm:p-4"},wt={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:space-x-4"},Dt={class:"mb-2 sm:mb-0"},kt={class:"flex flex-col sm:flex-row sm:items-center sm:space-x-4"},Ct={class:"mb-2 sm:mb-0"},Lt={class:"max-h-[300px] xs:max-h-[350px] sm:max-h-[400px] overflow-y-auto overflow-x-auto border border-gray-300 rounded"},Rt={class:"w-full border-collapse min-w-[600px]"},Ft={class:"border p-1 xs:p-2 text-xs xs:text-sm sm:text-base"},St={class:"border p-1 xs:p-2 text-xs xs:text-sm sm:text-base"},Ht={class:"border p-1 xs:p-2 text-green-500 text-xs xs:text-sm sm:text-base"},It={class:"border p-1 xs:p-2 text-xs xs:text-sm sm:text-base"},Tt={key:1,class:"p-1 xs:p-3 sm:p-4"},Ot={class:"max-h-[300px] xs:max-h-[350px] sm:max-h-[400px] overflow-y-auto overflow-x-auto border border-gray-300 rounded"},Vt={class:"w-full border-collapse min-w-[600px]"},Bt=["onClick"],Mt={class:"border p-1 xs:p-2 text-xs xs:text-sm sm:text-base"},Nt={class:"border p-1 xs:p-2 text-xs xs:text-sm sm:text-base"},Ut={class:"border p-1 xs:p-2 text-xs xs:text-sm sm:text-base"},$t={class:"border p-1 xs:p-2 text-xs xs:text-sm sm:text-base"},At={class:"border p-1 xs:p-2 text-green-500 text-xs xs:text-sm sm:text-base"},Et={key:2,class:"max-w-full xs:max-w-md sm:max-w-lg mx-auto mt-6 xs:mt-8 sm:mt-10 p-3 xs:p-4 sm:p-6 bg-white shadow-md rounded-lg"},jt={class:"text-base xs:text-lg sm:text-xl font-bold text-center"},qt={class:"mt-2 xs:mt-3 sm:mt-4 flex flex-col items-center"},zt={__name:"Rider_Dashboard",setup(Yt){const x=K(),_=et(),T=m(()=>x.state.Rider.intransitList.data),O=m(()=>x.state.Rider.history.data);m(()=>x.state.Rider.earn.data);const w=m(()=>{var e;return((e=x.state.userData.data)==null?void 0:e.user)||{}}),i=L({status:"",startDate:""}),V=m(()=>{let e=O.value||[];return i.status&&(e=e.filter(s=>s.status.toLowerCase()===i.status.toLowerCase())),i.startDate&&(e=e.filter(s=>{if(!s.created_at)return!1;const a=new Date(s.created_at),u=new Date(i.startDate),G=new Date(a.getFullYear(),a.getMonth(),a.getDate()),W=new Date(u.getFullYear(),u.getMonth(),u.getDate());return G.getTime()===W.getTime()})),e});function D(){}function B(){i.status="",i.startDate=""}function M(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}function N(){x.dispatch("Rider/getHistoryList")}function k(){x.dispatch("Rider/getIntransitList")}function U(){x.dispatch("Rider/getRiderDasboardList")}const d=p(!1);function $(){d.value=!d.value}const r=p(null),A=e=>{r.value=e,d.value=!1},C=p(null),b=L({image:""}),E=e=>{b.image=e.target.files[0]},j=m(()=>({image:{required:rt.withMessage("image is required",lt)}})),h=xt(j,b);async function q(){if(!await h.value.$validate())return;if(!r.value){console.error("Error: selectedTransit is undefined");return}const s=new FormData;s.append("image",b.image),s.append("id",r.value.id),await x.dispatch("Rider/sendImage",{id:r.value.id,formData:s}).then(a=>{a.isSuccess&&_.push({name:"Rider_Dashboard"})})}const z=()=>{r.value=null,C.value=null};async function Y(){if(r.value)try{(await x.dispatch("Rider/cancelOrder",{id:r.value.id})).isSuccess&&(r.value=null,C.value=null,k())}catch(e){console.error("Cancel order error:",e)}}const f=p(!1);function P(){f.value=!f.value}const Q=async()=>{try{(await x.dispatch("logout")).isSuccess&&_.push({name:"Login"})}catch(e){console.error("Logout error:",e)}};return X(()=>{k(),N(),U()}),(e,s)=>(l(),n(v,null,[e.showLoading?(l(),R(at,{key:0,class:"loading"})):c("",!0),y(ot),t("div",null,[t("header",nt,[s[3]||(s[3]=t("h1",{class:"text-base sm:text-lg md:text-xl lg:text-2xl 2xl:text-2xl font-bold 2xs:ml-8 xs:ml-8 sm:ml-6 md:ml-8 lg:ml-2"}," Welcome to Rider Dashboard ",-1)),t("div",dt,[t("div",mt,[t("img",{src:w.value.avatar,alt:"Profile",class:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover border border-green-400 shadow-md"},null,8,ct),y(g(F),{icon:"uil:setting",width:"20",height:"20","sm:width":"24","sm:height":"24",class:"cursor-pointer text-white",onClick:P})]),f.value?(l(),n("div",ut,[s[2]||(s[2]=t("a",{href:"/rider_profile",class:"block px-3 py-1 sm:px-4 sm:py-2 text-xs sm:text-sm text-black hover:bg-gray-100"}," Account Info ",-1)),t("button",{onClick:Q,class:"block w-full text-left px-3 py-1 sm:px-4 sm:py-2 text-xs sm:text-sm text-black hover:bg-gray-100"}," Logout ")])):c("",!0)])]),t("div",pt,[t("main",gt,[t("div",bt,[s[5]||(s[5]=t("h3",{class:"text-base sm:text-lg md:text-xl font-semibold mb-2 sm:mb-4"},"Your Earnings",-1)),t("div",ht,[t("div",ft,[s[4]||(s[4]=t("h4",{class:"text-xs xs:text-sm text-gray-500"},"Today",-1)),t("p",yt,o(w.value.cod||"0.00"),1)])])]),t("div",vt,[t("button",{onClick:$,class:"flex items-center gap-2 px-3 py-1 xs:px-4 xs:py-2 sm:px-6 sm:py-3 bg-green-800 text-white rounded-lg hover:bg-green-600 text-xs xs:text-sm sm:text-base"},[y(g(F),{icon:"ic:outline-history",width:"24",height:"24",style:{color:"#f9fffb"}}),S(" "+o(d.value?"Hide Delivery History":"View Delivery History"),1)])]),d.value?(l(),n("div",_t,[s[10]||(s[10]=t("h3",{class:"text-base sm:text-lg md:text-xl font-semibold mt-4 xs:mt-5 sm:mt-6 mb-2"},"Delivery History",-1)),t("div",wt,[t("div",Dt,[s[7]||(s[7]=t("label",{for:"statusFilter",class:"text-xs xs:text-sm sm:text-base font-medium mr-2"},"Filter by Status:",-1)),H(t("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>i.status=a),id:"statusFilter",class:"border rounded p-1 xs:p-2 text-xs xs:text-sm sm:text-base",onChange:D},s[6]||(s[6]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"Order delivered"},"Order Delivered",-1),t("option",{value:"Cancelled"},"Cancelled",-1)]),544),[[Z,i.status]])]),t("div",kt,[t("div",Ct,[s[8]||(s[8]=t("label",{for:"startDate",class:"text-xs xs:text-sm sm:text-base font-medium mr-2"},"Date:",-1)),H(t("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>i.startDate=a),id:"startDate",type:"date",class:"border rounded p-1 xs:p-2 text-xs xs:text-sm sm:text-base",onChange:D},null,544),[[tt,i.startDate]])])]),t("button",{onClick:B,class:"mt-2 sm:mt-0 px-3 py-1 xs:px-4 xs:py-2 bg-gray-300 rounded hover:bg-gray-400 text-xs xs:text-sm sm:text-base"}," Clear Filters ")]),t("div",Lt,[t("table",Rt,[s[9]||(s[9]=t("thead",{class:"bg-gray-200 sticky top-0 z-10"},[t("tr",null,[t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Product Name"),t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Total Amount"),t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Status"),t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Date")])],-1)),t("tbody",null,[(l(!0),n(v,null,I(V.value,a=>(l(),n("tr",{key:a.id,class:"cursor-pointer hover:bg-gray-200"},[t("td",Ft,o(a.product_name),1),t("td",St,o(a.total_amount),1),t("td",Ht,o(a.status),1),t("td",It,o(M(a.created_at)),1)]))),128))])])])])):c("",!0),!r.value&&!d.value?(l(),n("div",Tt,[s[12]||(s[12]=t("h3",{class:"text-base sm:text-lg md:text-xl font-semibold mt-4 xs:mt-5 sm:mt-6 mb-2"},"Intransit Deliveries",-1)),t("div",Ot,[t("table",Vt,[s[11]||(s[11]=t("thead",{class:"bg-gray-200 sticky top-0 z-10"},[t("tr",null,[t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Customer Name"),t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Ship to"),t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Quantity"),t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Total Amount"),t("th",{class:"border text-start p-1 xs:p-2 bg-gray-200 text-xs xs:text-sm sm:text-base"},"Status")])],-1)),t("tbody",null,[(l(!0),n(v,null,I(T.value,a=>(l(),n("tr",{key:a.id,onClick:u=>A(a),class:"cursor-pointer hover:bg-gray-200"},[t("td",Mt,o(a.customer_name),1),t("td",Nt,o(a.ship_to),1),t("td",Ut,o(a.quantity),1),t("td",$t,o(a.total_amount),1),t("td",At,o(a.status),1)],8,Bt))),128))])])])])):r.value?(l(),n("div",Et,[t("h2",jt,"Upload Image for Order #"+o(r.value.id),1),t("div",qt,[t("input",{type:"file",onChange:E,accept:"image/*,application/pdf",class:"w-full border p-1 xs:p-2 rounded text-xs xs:text-sm"},null,32),g(h).image.$error?(l(),R(it,{key:0,class:"text-xs xs:text-sm"},{default:st(()=>[S(o(g(h).image.$errors[0].$message),1)]),_:1})):c("",!0),t("button",{onClick:q,class:"mt-2 xs:mt-3 sm:mt-4 px-4 xs:px-5 sm:px-6 py-1 xs:py-1.5 sm:py-2 bg-green-800 text-white rounded-lg hover:bg-green-600 text-xs xs:text-sm sm:text-base"}," Upload ")]),t("div",{class:"mt-2 xs:mt-3 sm:mt-4 flex justify-between"},[t("button",{onClick:z,class:"px-3 xs:px-4 py-1 xs:py-1.5 sm:py-2 bg-gray-300 rounded text-xs xs:text-sm sm:text-base"}," Back "),t("button",{onClick:Y,class:"px-3 xs:px-4 py-1 xs:py-1.5 sm:py-2 bg-red-500 text-white rounded hover:bg-red-600 text-xs xs:text-sm sm:text-base"}," Cancel Order ")])])):c("",!0)])])])],64))}},Jt=J(zt,[["__scopeId","data-v-458d00b7"]]);export{Jt as default};
