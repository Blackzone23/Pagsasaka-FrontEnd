import{L as A,T as C}from"./Toast-oS8K0J6L.js";import{_ as L,A as d,i as N,f as S,g as I,c as n,E as R,l as m,a as p,b as t,u,I as h,F as b,h as V,j as B,o as l,t as a}from"./index-BxOnwd-r.js";/* empty css                                                              */const D={class:"h-screen w-full"},T={class:"bg-[#285a19] shadow p-4 flex justify-between items-center text-white"},j={class:"flex items-center space-x-4"},q={class:"relative inline-block text-left"},z={class:"flex items-center space-x-2"},E=["src"],F={key:0,class:"absolute right-0 z-50 mt-2 w-48 bg-white rounded shadow-lg"},M={class:"container mx-auto p-4"},Q={class:"flex flex-wrap items-center gap-4 mb-4"},$={class:"overflow-x-auto"},G={class:"max-h-[400px] overflow-y-auto"},H={class:"w-full border-collapse border border-gray-300 rounded-md min-w-[600px]"},J={key:0,class:"text-center"},K={class:"px-3 sm:px-4 py-2"},O={class:"px-3 sm:px-4 py-2"},U={class:"px-3 sm:px-4 py-2 text-center"},W={class:"px-3 sm:px-4 py-2"},X={class:"px-3 sm:px-4 py-2 break-all max-w-xs"},Y={class:"px-3 sm:px-4 py-2"},Z={class:"px-3 sm:px-4 py-2"},tt={class:"px-3 sm:px-4 py-2 text-end"},st=["onClick","disabled"],et={__name:"Payouts",setup(ot){const r=N(),g=B(),y=d(()=>r.state.showLoading.state),_=d(()=>{var o;return((o=r.state.userData.data)==null?void 0:o.user)||{}}),i=d(()=>r.state.Administrator.payments.data),f=d(()=>i.value&&i.value.length>0),c=S(!1);function x(){r.dispatch("Administrator/getPaymentRequests")}I(()=>{x()});function v(o){r.dispatch("Administrator/approvePayment",o).then(()=>{x()}).catch(s=>{console.error("Approval failed:",s)})}const w=()=>{location.reload()},k=()=>{c.value=!c.value},P=async()=>{try{(await r.dispatch("logout")).isSuccess&&g.push({name:"Login"})}catch(o){console.error("Logout error:",o)}};return(o,s)=>(l(),n(b,null,[y.value?(l(),R(A,{key:0,class:"loading"})):m("",!0),p(C),t("div",D,[t("header",T,[s[1]||(s[1]=t("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"Payment Transaction",-1)),t("div",j,[t("div",q,[t("div",z,[t("img",{src:_.value.avatar,alt:"Profile",class:"w-10 h-10 rounded-full object-cover shadow-md"},null,8,E),p(u(h),{icon:"uil:setting",width:"24",height:"24",class:"cursor-pointer text-white",onClick:k})]),c.value?(l(),n("div",F,[s[0]||(s[0]=t("a",{href:"/seller-profile",class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"}," Account Info ",-1)),t("button",{onClick:P,class:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100"}," Logout ")])):m("",!0)])])]),t("div",M,[t("div",Q,[t("button",{onClick:w,class:"bg-[#608C54] py-2 px-4 sm:px-6 text-white rounded-md flex items-center gap-1 hover:bg-gray-700 transition"},[p(u(h),{icon:"material-symbols-light:refresh",width:"20",height:"20"}),s[2]||(s[2]=t("span",{class:"hidden sm:inline"},"Refresh",-1))])]),s[5]||(s[5]=t("div",{class:"mb-3 space-y-3"},[t("p",{class:"text-xs sm:text-sm md:text-base"},"View the payment history here. It might take some time for payments to appear in the portal.")],-1)),t("div",$,[t("div",G,[t("table",H,[s[4]||(s[4]=t("thead",{class:"sticky top-0 bg-gray-300 z-10"},[t("tr",{class:"text-xs sm:text-sm md:text-md"},[t("th",{class:"px-3 sm:px-4 py-2 text-left border-b border-gray-300"}," Date"),t("th",{class:"px-3 sm:px-4 py-2 text-left border-b border-gray-300"},"Time Slot"),t("th",{class:"px-3 sm:px-4 py-2 text-left border-b border-gray-300"}," Queue Number"),t("th",{class:"px-3 sm:px-4 py-2 text-left border-b border-gray-300"},"Seller Name"),t("th",{class:"px-3 sm:px-4 py-2 text-left border-b border-gray-300"}," Code"),t("th",{class:"px-3 sm:px-4 py-2 text-left border-b border-gray-300"},"Amount "),t("th",{class:"px-3 sm:px-4 py-2 text-left border-b border-gray-300"},"Status "),t("th",{class:"px-3 sm:px-4 py-2 text-end border-b border-gray-300"}," Action")])],-1)),t("tbody",null,[f.value?(l(!0),n(b,{key:1},V(i.value,e=>(l(),n("tr",{key:e.id,class:"border-b border-gray-200 hover:bg-gray-200 text-xs sm:text-sm"},[t("td",K,a(e.date),1),t("td",O,a(e.time_slot),1),t("td",U,a(e.queue_number),1),t("td",W,a(e.seller_name),1),t("td",X,a(e.validation_code),1),t("td",Y,a(e.amount),1),t("td",Z,a(e.status),1),t("td",tt,[t("button",{onClick:at=>v(e.id),class:"bg-[#608C54] text-white py-1 px-3 rounded-md text-xs hover:bg-green-700 transition",disabled:e.status!=="Pending"}," Approve ",8,st)])]))),128)):(l(),n("tr",J,s[3]||(s[3]=[t("td",{colspan:"8",class:"px-3 sm:px-4 py-2 text-xs sm:text-sm"},"No transactions found.",-1)])))])])])])])])],64))}},dt=L(et,[["__scopeId","data-v-112f106e"]]);export{dt as default};
