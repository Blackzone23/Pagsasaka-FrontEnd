import{_ as B}from"./Market_NavBar-B-Ck46k9.js";import{_ as E}from"./Footer-DjE1INf3.js";import{_ as b}from"./BaseCheckBox-B8yhtDaP.js";import{_ as N}from"./BaseInputField-FGXD96C8.js";import{L as P,T as D}from"./Toast-CMcD8vj2.js";import"./lodash-CrtkfJpY.js";import{A as h,i as F,g as C,p as w,f as k,c as d,E as Q,l as _,a as l,b as s,r as z,u as m,I as f,d as G,e as M,F as O,h as R,t as c,j as Y,o as a}from"./index-C6ga6Tkl.js";import"./BaseSearchField-HaI1uJ6B.js";/* empty css                                                              */const H={class:"min-h-screen flex flex-col"},J={class:"flex-grow"},K={key:0},W={class:"p-4 w-full h-full"},X={key:1,class:"flex flex-col items-center justify-center py-20 text-gray-500 text-center gap-2"},Z={key:2},I={class:"p-4 w-full h-full"},ee={class:"flex justify-between items-center mb-4"},te={class:"text-lg font-bold text-[#608C54] flex items-center"},se={class:"h-[400px] max-h-[400px] overflow-y-auto border border-gray-300 rounded-lg"},oe={class:"flex items-center md:col-span-2 space-x-4"},le=["src"],ie={class:"font-semibold"},ne={class:"text-gray-500 text-sm"},ae={class:"md:col-span-1 text-center"},de={class:"text-gray-700 font-medium"},ce={class:"md:col-span-1 text-center"},re={class:"flex items-center justify-center text-sm text-white space-x-2"},ue=["onClick"],pe=["onClick"],he={class:"md:col-span-1 text-center"},me={class:"text-gray-700 font-medium"},fe={class:"flex flex-col md:flex-row justify-between items-center p-4 border-t border-gray-300 mt-4 space-y-4 md:space-y-0"},_e={class:"flex items-center space-x-3"},ge={class:"text-right space-y-1"},xe={class:"font-bold text-lg"},Se={__name:"Add_Cart",setup(ve){const r=F(),V=Y(),L=h(()=>r.state.showLoading.state),i=h(()=>r.state.Consumer.cartItem.data);function q(){r.dispatch("Consumer/getCartList").then(()=>{i.value.forEach(t=>{t.selected===void 0&&(t.selected=!1)}),u.value=i.value.every(t=>t.selected)})}C(()=>{q(),w(i,t=>{t.forEach(e=>{e.selected===void 0&&(e.selected=!0)})})});const u=k(!1);function A(){i.value.forEach(t=>{t.selected=u.value})}w(()=>i.value.map(t=>t.selected),t=>{const e=t.filter(Boolean).length;u.value=e===i.value.length,e>=2&&(u.value=!0)},{deep:!0});const g=h(()=>i.value.filter(t=>t.selected).length),S=h(()=>i.value.filter(t=>t.selected).reduce((t,e)=>t+e.price*e.quantity,0).toFixed(2));function T(t){const e=i.value.find(n=>n.id===t);e&&e.quantity++}function $(t){const e=i.value.find(n=>n.id===t);e&&e.quantity>1&&e.quantity--}const x=h(()=>i.value.filter(t=>t.selected).length);async function j(){const t=i.value.filter(e=>e.selected).map(e=>e.id);await Promise.all(t.map(e=>r.dispatch("Consumer/deleteCart",e))),await r.dispatch("Consumer/getCartList")}const U=async()=>{const t=i.value.filter(e=>e.selected);if(t.length!==0){for(const e of t)try{await r.dispatch("Consumer/Checkout",{id:e.id})}catch(n){console.error("Checkout failed for item:",e.id,n)}V.push("/checkout")}},v=k(!0);return C(()=>{setTimeout(()=>{v.value=!1},2e3)}),(t,e)=>{const n=z("n-skeleton");return a(),d("div",H,[L.value?(a(),Q(P,{key:0,class:"loading"})):_("",!0),l(D),l(B),s("div",J,[v.value?(a(),d("div",K,[l(n,{text:"",repeat:2}),s("div",W,[l(n,{height:"30px",width:"50%",class:"mb-4"}),l(n,{height:"20px",width:"80%",class:"mb-4"}),l(n,{height:"40px",width:"100%",class:"mb-4"}),l(n,{height:"200px",width:"100%",class:"mb-4"}),l(n,{height:"50px",width:"100%",class:"mb-4"})]),l(n,{text:"",style:{width:"70%"}})])):i.value.length===0?(a(),d("div",X,[e[1]||(e[1]=s("p",{class:"text-xl"},"Your cart is currently empty.",-1)),l(m(f),{icon:"mynaui:sad-ghost-solid",width:"100",height:"100",style:{color:"#9faba4"}})])):(a(),d("div",Z,[s("div",I,[s("div",ee,[s("h2",te,[e[2]||(e[2]=M(" Add to cart ")),e[3]||(e[3]=s("span",{class:"ml-2 w-24 border-dotted border-b-2 border-[#608C54]"},null,-1)),l(m(f),{icon:"bitcoin-icons:cart-filled",width:"24",height:"24",style:{color:"#608C54"}})])]),e[4]||(e[4]=G('<div class="hidden md:grid md:grid-cols-6 gap-4 items-center bg-gray-100 p-3 text-sm font-medium border-t border-b border-gray-300"><p class="col-span-2 text-gray-500">Product</p><p class="col-span-1 text-gray-500 text-center">Unit Price</p><p class="col-span-1 text-gray-500 text-center">Quantity</p><p class="col-span-1 text-gray-500 text-center">Total Price</p></div>',1)),s("div",se,[(a(!0),d(O,null,R(i.value,o=>{var y;return a(),d("div",{key:o.id,class:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center p-4 border-b border-gray-300"},[s("div",oe,[l(b,{modelValue:o.selected,"onUpdate:modelValue":p=>o.selected=p,id:`cart-item-${o.id}`,class:"mr-2"},null,8,["modelValue","onUpdate:modelValue","id"]),(y=o==null?void 0:o.product_img)!=null&&y.length?(a(),d("img",{key:0,src:o.product_img[0],alt:"Product",class:"w-16 h-16 rounded-lg"},null,8,le)):_("",!0),s("div",null,[s("h3",ie,c(o.product_name),1),s("p",ne,"Variants: "+c(o.unit),1)])]),s("div",ae,[s("p",de,"₱"+c(o.price),1)]),s("div",ce,[s("div",re,[s("button",{onClick:p=>$(o.id)},[l(m(f),{icon:"zondicons:minus-solid",width:"20",height:"20",style:{color:"#608C54"}})],8,ue),l(N,{modelValue:o.quantity,"onUpdate:modelValue":p=>o.quantity=p,class:"w-14 text-center border rounded"},null,8,["modelValue","onUpdate:modelValue"]),s("button",{onClick:p=>T(o.id)},[l(m(f),{icon:"gridicons:add",width:"24",height:"24",style:{color:"#608C54"}})],8,pe)])]),s("div",he,[s("p",me,"₱"+c(o.price*o.quantity),1)])])}),128))]),s("div",fe,[s("div",_e,[l(b,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),onChange:A},null,8,["modelValue"]),s("p",null,"Select All ("+c(g.value)+")",1),x.value>0?(a(),d("button",{key:0,onClick:j,class:"text-red-800 hover:text-red-600"},c(x.value===1?"Delete":"Delete All"),1)):_("",!0)]),s("div",ge,[s("p",xe,"Total ("+c(g.value)+" items): ₱"+c(S.value),1)])]),s("div",{class:"text-end mt-4 flex justify-end"},[s("button",{onClick:U,class:"bg-[#608C54] text-white px-6 py-2 rounded-lg block md:inline-block"},"Check Out")])])]))]),l(E)])}}};export{Se as default};
