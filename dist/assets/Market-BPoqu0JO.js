import{g as z,m as ge,p as te,q,s as se,v as fe,x as ve,y as he,z as T,A as _,B as L,C as xe,u as N,_ as be,D as ye,f as $,c,E as we,l as j,a as v,b as e,w as G,G as S,H as V,e as w,F as D,h as F,t as h,I as _e,i as Ce,j as ke,r as X,o as u,J as A,k as Y}from"./index-DITtJx53.js";import{_ as Me}from"./Footer-DY8Cx-LT.js";import{_ as Ie}from"./Market_NavBar-BxMLbVdv.js";import{B as Z}from"./BaseLabel-C_eLoLgN.js";import{_ as Se}from"./BaseSearchField-PkV1gQds.js";import{T as Ve,L as je}from"./Toast-CON0Qnhu.js";import"./lodash-DJsiO634.js";/* empty css                                                              */const Ne="/assets/Mfarmer-owAHeeum.png";function Pe(l){return ve()?(he(l),!0):!1}const R=new WeakMap,We=(...l)=>{var o;const d=l[0],p=(o=q())==null?void 0:o.proxy;if(p==null&&!se())throw new Error("injectLocal must be called in setup");return p&&R.has(p)&&d in R.get(p)?R.get(p)[d]:fe(...l)},Te=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Le=Object.prototype.toString,Ee=l=>Le.call(l)==="[object Object]";function ee(l){return l.endsWith("rem")?Number.parseFloat(l)*16:Number.parseFloat(l)}function Q(l){return Array.isArray(l)?l:[l]}function $e(l){return q()}function De(l,o=!0,d){$e()?z(l,d):o?l():ge(l)}function Ae(l,o,d){return te(l,o,{...d,immediate:!0})}const K=Te?window:void 0;function ze(l){var o;const d=L(l);return(o=d==null?void 0:d.$el)!=null?o:d}function J(...l){const o=[],d=()=>{o.forEach(r=>r()),o.length=0},p=(r,a,i,m)=>(r.addEventListener(a,i,m),()=>r.removeEventListener(a,i,m)),x=_(()=>{const r=Q(L(l[0])).filter(a=>a!=null);return r.every(a=>typeof a!="string")?r:void 0}),k=Ae(()=>{var r,a;return[(a=(r=x.value)==null?void 0:r.map(i=>ze(i)))!=null?a:[K].filter(i=>i!=null),Q(L(x.value?l[1]:l[0])),Q(N(x.value?l[2]:l[1])),L(x.value?l[3]:l[2])]},([r,a,i,m])=>{if(d(),!(r!=null&&r.length)||!(a!=null&&a.length)||!(i!=null&&i.length))return;const f=Ee(m)?{...m}:m;o.push(...r.flatMap(M=>a.flatMap(C=>i.map(y=>p(M,C,y,f)))))},{flush:"post"}),b=()=>{k(),d()};return Pe(d),b}function Be(){const l=T(!1),o=q();return o&&z(()=>{l.value=!0},o),l}function Fe(l){const o=Be();return _(()=>(o.value,!!l()))}const Oe=Symbol("vueuse-ssr-width");function Ue(){const l=se()?We(Oe,null):null;return typeof l=="number"?l:void 0}function He(l,o={}){const{window:d=K,ssrWidth:p=Ue()}=o,x=Fe(()=>d&&"matchMedia"in d&&typeof d.matchMedia=="function"),k=T(typeof p=="number"),b=T(),r=T(!1),a=i=>{r.value=i.matches};return xe(()=>{if(k.value){k.value=!x.value;const i=L(l).split(",");r.value=i.some(m=>{const f=m.includes("not all"),M=m.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),C=m.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let y=!!(M||C);return M&&y&&(y=p>=ee(M[1])),C&&y&&(y=p<=ee(C[1])),f?!y:y});return}x.value&&(b.value=d.matchMedia(L(l)),r.value=b.value.matches)}),J(b,"change",a,{passive:!0}),_(()=>r.value)}function Ge(l={}){const{window:o=K,initialWidth:d=Number.POSITIVE_INFINITY,initialHeight:p=Number.POSITIVE_INFINITY,listenOrientation:x=!0,includeScrollbar:k=!0,type:b="inner"}=l,r=T(d),a=T(p),i=()=>{if(o)if(b==="outer")r.value=o.outerWidth,a.value=o.outerHeight;else if(b==="visual"&&o.visualViewport){const{width:f,height:M,scale:C}=o.visualViewport;r.value=Math.round(f*C),a.value=Math.round(M*C)}else k?(r.value=o.innerWidth,a.value=o.innerHeight):(r.value=o.document.documentElement.clientWidth,a.value=o.document.documentElement.clientHeight)};i(),De(i);const m={passive:!0};if(J("resize",i,m),o&&b==="visual"&&o.visualViewport&&J(o.visualViewport,"resize",i,m),x){const f=He("(orientation: portrait)");te(f,()=>i())}return{width:r,height:a}}const Ye={class:"relative"},Re=["src"],Qe={class:"flex flex-col items-center space-y-4 2xl:p-8 2xs:p-4 bg-[#285a19]"},Je={class:"flex justify-center 2xs:w-full"},qe=["src"],Ke={class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},Xe=["onClick"],Ze={class:"bg-gray-100 min-h-screen p-4"},et={class:"flex flex-col md:flex-row"},tt={class:"w-full md:w-1/4 bg-white shadow-md rounded-lg p-4 mb-4 md:mb-0"},st={class:"space-y-2 bg-white shadow-md rounded-lg p-4"},ot={class:"border border-gray-300 rounded-lg p-4"},lt={class:"mb-4 text-xs"},nt={class:"border border-gray-300 flex flex-col rounded-lg p-4"},at={class:"mb-4 text-xs"},rt={class:"block mb-2"},it={class:"block mb-2"},dt={class:"block mb-2"},ut={class:"block mb-2"},ct={class:"block mb-2"},pt={class:"block mb-2"},mt={class:"block mb-2"},gt={class:"block mb-2"},ft={class:"p-4 mt-12"},vt={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-5 grid-rows-2 gap-4"},ht=["src"],xt={class:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity"},bt=["onClick"],yt={class:"p-2"},wt={class:"text-sm font-semibold"},_t={class:"text-xs font-semibold"},Ct={class:"text-red-500 font-bold text-sm"},kt={key:0,class:"text-gray-600 text-xs mt-2"},Mt={class:"mt-10 mr-4 flex justify-center text-sm"},It=["disabled"],St={class:"py-2 px-4 bg-gray-100 flex text-sm items-center border-l border-r border-gray-300"},Vt=["disabled"],jt={class:"h-full w-full p-10"},Nt={class:"max-w-4xl mx-auto p-4 border-2 border-green-500 rounded-lg"},Pt={class:"flex items-center mb-6"},Wt={class:"mr-6 hidden sm:block"},Tt={class:"p-4"},Lt={key:0,class:"fixed bottom-4 right-4 2xl:w-[900px] 2xs:w-[470px] 2xl:h-[85vh] 2xs:h-[65vh] bg-white rounded-lg shadow-lg flex flex-col border z-50"},Et={class:"p-4 border-b rounded-sm bg-gray-100 flex justify-between items-center"},$t={class:"flex flex-1 overflow-hidden"},Dt={class:"w-1/3 bg-white border-r border-gray-300 p-4 flex flex-col"},At={class:"flex"},zt={class:"mt-3 flex-1 overflow-auto"},Bt=["onClick"],Ft=["src"],Ot={class:"flex-1"},Ut={class:"font-semibold"},Ht={class:"text-xs text-gray-500 truncate"},Gt={key:0,class:"text-xs bg-red-500 text-white px-2 py-1 rounded-full"},Yt=["onClick"],Rt={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex justify-center items-center z-50"},Qt={class:"bg-white p-6 rounded shadow-lg w-96"},Jt={class:"flex justify-around mt-4"},qt={class:"w-full flex flex-col"},Kt={key:0,class:"flex-1 flex items-center justify-center text-gray-400"},Xt={key:1,class:"flex flex-col flex-1"},Zt={class:"p-4 border-b text-lg font-bold flex justify-between items-center bg-gray-100"},es={class:"flex-1 bg-gray-50 p-4 overflow-auto space-y-4 2xl:text-sm 2xs:text-sm max-h-[400px]"},ts=["src"],ss={class:"text-xs"},os={key:1,class:"w-8 h-8 rounded-full bg-gray-300"},ls={class:"p-4 border-t bg-white flex items-center"},ns={__name:"Market",setup(l){const o=Ce(),d=ke(),p=_(()=>o.state.showLoading.state),x=_(()=>o.state.Consumer.conversation.data),k=_(()=>o.state.Consumer.message.data),b=_(()=>o.state.Consumer.productItem.data),r=_(()=>o.state.Consumer.moreProduct.data),a=_(()=>o.state.currentPage),i=_(()=>o.state.totalPages);function m(){o.dispatch("Consumer/getConversation")}z(()=>{m()});const{width:f}=Ge(),M=_(()=>f.value>=1536?5:f.value>=1280?4:f.value>=1024?3:f.value>=768?4:f.value>=640?3:(f.value>=480,1));function C(){o.dispatch("Consumer/getItemList")}z(()=>{C()});async function y(n){sessionStorage.setItem("ItemInfo",n),d.push({name:"Market_Page1"})}async function O(){await o.dispatch("Consumer/getMoreList",{currentPage:a.value})}z(()=>{O()});const g=ye({all:!0,vegetable:!1,seed:!1,grains:!1,soil:!1,fruits:!1,pelletes:!1,process:!1});function oe(){a.value>1&&(o.commit("setCurrentPage",a.value-1),O())}function le(){a.value<i.value&&(o.commit("setCurrentPage",a.value+1),O())}const U=$(!1),I=$(null),E=$(""),ne=()=>{I.value=null},ae=()=>{U.value=!0},re=()=>{U.value=!1},ie=n=>{console.log("Selected chat ID: ",n);const t=x.value.find(H=>H.id===n);I.value=t,o.dispatch("Consumer/getMessages",n)},de=async()=>{if(!E.value.trim()||!I.value)return;const n={conversation_id:I.value.id,message:E.value};try{await o.dispatch("Consumer/sendMessage",n),await o.dispatch("Consumer/getMessages",I.value.id),E.value=""}catch(t){console.error("Failed to send message:",t)}},B=$(!1),P=$(null),ue=(n,t)=>{t.stopPropagation(),B.value=!0,P.value=n},ce=n=>{n.stopPropagation(),B.value=!1,P.value=null},pe=async()=>{var n;if(P.value)try{await o.dispatch("Consumer/deleteConversation",P.value),B.value=!1,P.value=null,m(),((n=I.value)==null?void 0:n.id)===P.value&&(I.value=null,k.value=[])}catch(t){console.error("Failed to delete conversation:",t)}};return(n,t)=>{const H=X("n-carousel"),me=X("n-rate");return u(),c(D,null,[p.value?(u(),we(je,{key:0,class:"loading"})):j("",!0),v(Ve),e("div",null,[v(Ie),e("div",Ye,[e("img",{src:N(Ne),alt:"",class:"object-fill 2xl:h-[500px] w-full"},null,8,Re)]),e("div",Qe,[t[18]||(t[18]=e("div",{class:"text-center w-full"},[e("h2",{class:"2xl:text-2xl 2xs:text-sm xl:text-2xl lg:text-2xl font-bold text-white"},"Grab this now"),e("p",{class:"mt-2 2xl:text-lg 2xs:text-xs lg:text-lg xl:text-lg text-gray-300 max-w-3xl mx-auto"}," Explore our curated selection of high-quality goods, featuring fresh produce, artisanal items, and everyday essentials, all while supporting local farmers and communities. ")],-1)),e("div",Je,[v(H,{"slides-per-view":M.value,"space-between":20,loop:!1,draggable:"","show-arrow":""},{default:G(()=>[(u(!0),c(D,null,F(b.value,s=>(u(),c("div",{key:s.id,class:"border-2 border-[#608C54] relative group w-20 h-20 sm:w-32 xl:w-48 sm:h-32 md:w-32 md:h-32 xl:h-48 lg:w-56 lg:h-56 2xs:w-56 2xs:h-56 rounded-lg overflow-hidden mx-auto"},[e("img",{src:s.product_img[0],alt:"Carousel Image",class:"w-full h-full object-cover transition-transform duration-300 transform group-hover:scale-110"},null,8,qe),e("div",Ke,[e("button",{onClick:W=>y(s.id),class:"px-2 py-1 2xl:px-4 md:px-2 2xl:py-2 text-xs sm:text-sm md:text-xs text-white bg-green-500 rounded-lg"}," View Product ",8,Xe)])]))),128))]),_:1},8,["slides-per-view"])])]),e("div",Ze,[e("div",et,[e("div",tt,[e("div",st,[e("div",ot,[e("div",lt,[v(N(A),{icon:"mdi-light:truck",width:"52",height:"52",style:{color:"#346a3d"}}),v(Z,{class:"block text-lg font-medium text-gray-700"},{default:G(()=>t[19]||(t[19]=[w("Delivery every day ")])),_:1}),t[20]||(t[20]=e("div",null,[e("p",null,"Learn More on our"),e("a",{href:"/delivery-guide",class:"px-4 py-2 text-[#608C54] hover:underline"},"Delivery Guide")],-1))])]),e("div",nt,[v(Z,{class:"font-bold"},{default:G(()=>t[21]||(t[21]=[w("Product Type")])),_:1}),e("div",at,[e("label",rt,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>g.all=s),onChange:t[1]||(t[1]=(...s)=>n.toggleAll&&n.toggleAll(...s))},null,544),[[V,g.all]]),t[22]||(t[22]=w(" All "))]),e("label",it,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>g.vegetable=s),onChange:t[3]||(t[3]=s=>n.selectCategory("vegetable"))},null,544),[[V,g.vegetable]]),t[23]||(t[23]=w(" Vegetable "))]),e("label",dt,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>g.seed=s),onChange:t[5]||(t[5]=s=>n.selectCategory("seed"))},null,544),[[V,g.seed]]),t[24]||(t[24]=w(" Seed "))]),e("label",ut,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>g.grains=s),onChange:t[7]||(t[7]=s=>n.selectCategory("grains"))},null,544),[[V,g.grains]]),t[25]||(t[25]=w(" Grains "))]),e("label",ct,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>g.soil=s),onChange:t[9]||(t[9]=s=>n.selectCategory("soil"))},null,544),[[V,g.soil]]),t[26]||(t[26]=w(" Soil "))]),e("label",pt,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=s=>g.fruits=s),onChange:t[11]||(t[11]=s=>n.selectCategory("fruits"))},null,544),[[V,g.fruits]]),t[27]||(t[27]=w(" Fruits "))]),e("label",mt,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=s=>g.pelletes=s),onChange:t[13]||(t[13]=s=>n.selectCategory("pelletes"))},null,544),[[V,g.pelletes]]),t[28]||(t[28]=w(" Pellets "))]),e("label",gt,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=s=>g.process=s),onChange:t[15]||(t[15]=s=>n.selectCategory("process"))},null,544),[[V,g.process]]),t[29]||(t[29]=w(" Processed "))])])])])]),e("div",ft,[e("div",vt,[(u(!0),c(D,null,F(r.value.slice(0,10),s=>(u(),c("div",{key:s.id,class:"relative border rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow group"},[e("img",{src:s.product_img[0],alt:"Product Image",class:"w-full h-40 object-cover"},null,8,ht),e("div",xt,[e("button",{onClick:W=>y(s.id),class:"px-2 py-1 2xl:px-4 md:px-2 2xl:py-2 text-xs sm:text-sm md:text-xs text-white bg-green-500 rounded-lg"}," View Product ",8,bt)]),e("div",yt,[e("h3",wt,h(s.product_name),1),e("p",_t,h(s.description),1),e("div",Ct,"₱"+h(s.price),1),v(me,{"allow-half":"",readonly:"","default-value":s.rating,size:"small"},null,8,["default-value"]),s.location?(u(),c("div",kt," 📍 "+h(s.location),1)):j("",!0)])]))),128))]),e("div",Mt,[e("button",{type:"button",class:"py-2 px-4 bg-gray-100 rounded-tl-lg rounded-bl-lg hover:bg-gray-200 text-gray-600",onClick:oe,disabled:a.value===1},"Previous",8,It),e("span",St,h(a.value)+" of "+h(i.value),1),e("button",{type:"button",class:"py-2 px-4 bg-gray-100 rounded-tr-lg rounded-br-lg hover:bg-gray-200 text-gray-600",onClick:le,disabled:a.value===i.value},"Next",8,Vt)])])])]),e("div",jt,[e("div",Nt,[t[31]||(t[31]=e("h2",{class:"text-3xl text-center font-bold text-green-600 mb-4"},"Delivery Policy",-1)),e("div",Pt,[e("div",Wt,[v(N(A),{icon:"material-symbols-light:delivery-truck-speed",width:"112",height:"112",style:{color:"#12a246"}})]),t[30]||(t[30]=e("div",null,[e("p",{class:"text-gray-800 text-base mb-4"}," We work with a team of regular drivers and third-party providers to handle all of our deliveries. Please make sure you are contactable by our drivers on the day and that clear instructions are given for the receiving of items to avoid delays and possible issues. "),e("p",{class:"text-gray-800 text-base font-semibold"}," We implement a 15-minute waiting time for all our deliveries. In the event that the recipient cannot be contacted, our personnel will return your order to us. You can pick it up in our office. "),e("p",{class:"text-gray-800 text-base mt-4"},[w(" To reduce food waste, for orders involving fresh produce—"),e("span",{class:"font-bold"},"all items that are not picked up within the same week of the scheduled pickup or delivery will be considered good as sold.")])],-1))])]),e("div",Tt,[e("button",{onClick:ae,class:"hidden md:flex bg-yellow-100 border-2 border-gray-300 rounded-full p-3 fixed bottom-4 right-4 shadow-md hover:bg-yellow-300 items-center justify-center"},[v(N(A),{icon:"tabler:message",width:"28",height:"28",style:{color:"#608C54"}})])]),U.value?(u(),c("div",Lt,[e("div",Et,[t[32]||(t[32]=e("span",{class:"text-xl font-bold text-green-600"},"Chat",-1)),e("button",{onClick:re,class:"text-gray-600 text-lg"},[v(N(A),{icon:"icon-park-solid:close-one",width:"20",height:"20"})])]),e("div",$t,[e("div",Dt,[e("div",At,[v(Se,{placeholder:"Search...",class:"2xl:w-[270px] 2xs:w-[137px]"})]),e("div",zt,[(u(!0),c(D,null,F(x.value,s=>(u(),c("div",{key:s.id,class:"flex items-center p-3 border-b cursor-pointer hover:bg-gray-100 transition duration-200",onClick:W=>ie(s.id)},[e("img",{src:s.chat_partner_avatar,class:"w-12 h-12 rounded-full border mr-3",alt:"Avatar"},null,8,Ft),e("div",Ot,[e("span",Ut,h(s.chat_partner_name),1),e("p",Ht,h(s.message),1)]),s.unread_messages_count?(u(),c("span",Gt,h(s.unread_messages_count),1)):j("",!0),e("button",{class:"text-white rounded",onClick:W=>ue(s.id,W)},[v(N(A),{icon:"mdi-light:delete",width:"20",height:"20",style:{color:"#ad1414"}})],8,Yt),B.value?(u(),c("div",Rt,[e("div",Qt,[t[33]||(t[33]=e("h3",{class:"text-xl font-semibold text-center"},"Are you sure you want to delete this conversation?",-1)),e("div",Jt,[e("button",{onClick:pe,class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"},"Yes, Delete"),e("button",{onClick:t[16]||(t[16]=W=>ce(W)),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400"},"Cancel")])])])):j("",!0)],8,Bt))),128))])]),e("div",qt,[I.value?(u(),c("div",Xt,[e("div",Zt,[e("span",null,h(I.value.chat_partner_name),1),e("button",{onClick:ne,class:"text-gray-500"},"Close")]),e("div",es,[(u(!0),c(D,null,F(k.value,s=>(u(),c("div",{key:s.id,class:Y(["flex items-start space-x-3",{"justify-end":s.sender.id===n.userName,"justify-start":s.sender.id!==n.userName}])},[s.sender.id!==n.userName?(u(),c("img",{key:0,src:s.sender.avatar||n.defaultAvatar,class:"w-8 h-8 rounded-full"},null,8,ts)):j("",!0),e("div",{class:Y(["p-3 rounded-lg shadow-md w-auto max-w-xs",{"bg-green-500 text-white":s.sender.id===n.userName,"bg-gray-200 text-black":s.sender.id!==n.userName}])},[e("p",{class:Y(["text-sm font-bold",{"text-white":s.sender.id===n.userName,"text-green-600":s.sender.id!==n.userName}])},h(s.sender.first_name)+" "+h(s.sender.last_name),3),e("p",ss,h(s.message),1)],2),s.sender.id===n.userName?(u(),c("div",os)):j("",!0)],2))),128))]),e("div",ls,[S(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>E.value=s),type:"text",placeholder:"Type a message here",class:"flex-1 p-2 border rounded-md text-sm"},null,512),[[_e,E.value]]),e("button",{class:"ml-2 bg-green-600 text-white px-4 py-2 rounded-md transition duration-200 hover:bg-green-700",onClick:de}," Send ")])])):(u(),c("div",Kt,t[34]||(t[34]=[e("p",{class:"text-xl"},"Welcome to Pagsasaka Chat",-1)])))])])])):j("",!0)]),v(Me)])],64)}}},gs=be(ns,[["__scopeId","data-v-8efeea70"]]);export{gs as default};
