import{A as w,i as z,f as u,g as B,c as n,E as D,l as h,a as b,b as e,u as H,I as V,k as d,F as g,h as y,t as i,G as A,J as I,K as N,j as T,o}from"./index-C6ga6Tkl.js";import{L as E,T as F}from"./Toast-CMcD8vj2.js";import"./lodash-CrtkfJpY.js";/* empty css                                                              */const K={class:"bg-[#285a19] shadow p-4 flex justify-between items-center text-white"},P={class:"flex items-center space-x-4"},R={class:"relative inline-block text-left"},W={class:"flex items-center space-x-2"},G=["src"],J={key:0,class:"absolute right-0 z-50 mt-2 w-48 bg-white rounded shadow-lg"},U={class:"h-[90vh] flex flex-col md:flex-row"},Y=["onClick"],$=["src"],q={class:"flex-1"},O={class:"font-medium block"},Q={class:"text-sm text-gray-500"},X={key:0,class:"flex flex-col h-full"},Z={class:"p-4 bg-gray-100 border-b flex justify-between items-center"},ee={class:"text-lg font-semibold"},te={class:"flex-1 bg-gray-50 p-4 overflow-auto space-y-4 2xl:text-sm 2xs:text-sm"},se={key:0,class:"w-8 h-8 rounded-full bg-gray-300"},le={class:"text-xs"},ae={key:1,class:"w-8 h-8 rounded-full bg-gray-300"},oe={class:"p-4 border-t flex items-center bg-gray-50"},ne={key:1,class:"flex items-center justify-center flex-1 text-gray-500"},he={__name:"FMessage",setup(re){const f=z(),_=T(),k=w(()=>f.state.showLoading.state),C=w(()=>{var s;return((s=f.state.userData.data)==null?void 0:s.user)||{}});u([{id:1,name:"Alice",avatar:"https://via.placeholder.com/40",messages:[{id:1,text:"Hey there!",sent:!1},{id:2,text:"How are you?",sent:!1},{id:3,text:"I am good, thanks!",sent:!0}]},{id:2,name:"Bob",avatar:"https://via.placeholder.com/40",messages:[{id:1,text:"Hello!",sent:!1},{id:2,text:"How was your day?",sent:!0}]}]);const l=u(null),c=u(""),a=u(""),L=s=>{l.value=s},j=()=>{l.value=null},v=()=>{c.value.trim()&&l.value&&(l.value.messages.push({id:Date.now(),text:c.value,sent:!0}),c.value="")},p=()=>{const s=window.innerWidth;s<400?a.value="2xs":s<640?a.value="xs":s<768?a.value="sm":s<1024?a.value="md":s<1280?a.value="lg":s<1536?a.value="xl":a.value="2xl"};B(()=>{p(),window.addEventListener("resize",p)});const m=u(!1),S=()=>{m.value=!m.value},M=async()=>{try{(await f.dispatch("logout")).isSuccess&&_.push({name:"Login"})}catch(s){console.error("Logout error:",s)}};return(s,r)=>(o(),n(g,null,[k.value?(o(),D(E,{key:0,class:"loading"})):h("",!0),b(F),e("header",K,[r[2]||(r[2]=e("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"Message History",-1)),e("div",P,[e("div",R,[e("div",W,[e("img",{src:C.value.avatar,alt:"Profile",class:"w-10 h-10 rounded-full object-cover shadow-md"},null,8,G),b(H(V),{icon:"uil:setting",width:"24",height:"24",class:"cursor-pointer text-white",onClick:S})]),m.value?(o(),n("div",J,[r[1]||(r[1]=e("a",{href:"/seller-profile",class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"}," Account Info ",-1)),e("button",{onClick:M,class:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100"}," Logout ")])):h("",!0)])])]),e("div",U,[e("div",{class:d(["p-4 border-r shadow-lg overflow-y-auto transition-all duration-300",{"w-full md:w-1/3 bg-gray-100":!l.value||a.value!=="2xs","hidden md:block md:w-1/3 bg-gray-100":l.value&&a.value==="2xs"}])},[r[3]||(r[3]=e("div",{class:"flex justify-between"},[e("h2",{class:"text-lg text-[#1c520d] font-semibold mb-4"},"Chats")],-1)),e("ul",null,[(o(!0),n(g,null,y(s.conversationStart,t=>{var x;return o(),n("li",{key:t.id,onClick:ie=>L(t.id),class:d(["p-2 cursor-pointer hover:bg-gray-200 rounded-md flex items-center",{"bg-blue-200":((x=l.value)==null?void 0:x.id)===t.id}])},[e("img",{src:t.avatar,alt:"Avatar",class:"w-10 h-10 rounded-full mr-3"},null,8,$),e("div",q,[e("span",O,i(t.first_name)+i(t.middle_name)+i(t.last_name),1),e("span",Q,i(t.message||"No messages"),1)])],10,Y)}),128))])],2),e("div",{class:d(["flex flex-col border-l shadow-lg h-full transition-all duration-300",{"w-full md:w-2/3 flex":l.value||a.value!=="2xs",hidden:!l.value&&a.value==="2xs"}])},[l.value?(o(),n("div",X,[e("div",Z,[e("h2",ee,i(l.value.name),1),e("button",{onClick:j,class:"text-gray-500"},"Close")]),e("div",te,[(o(!0),n(g,null,y(l.value.messages,(t,x)=>(o(),n("div",{key:x,class:d(["flex items-start space-x-3",{"justify-end":t.sent,"justify-start":!t.sent}])},[t.sent?h("",!0):(o(),n("div",se)),e("div",{class:d(["p-3 rounded-lg shadow-md w-auto max-w-xs",{"bg-green-500 text-white":t.sent,"bg-gray-200 text-black":!t.sent}])},[e("p",{class:d(["text-sm font-bold",{"text-white":t.sent,"text-green-600":!t.sent}])},i(t.sent?"You":l.value.name),3),e("p",le,i(t.text),1)],2),t.sent?(o(),n("div",ae)):h("",!0)],2))),128))]),e("div",oe,[A(e("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>c.value=t),onKeyup:N(v,["enter"]),type:"text",class:"flex-1 p-2 border rounded-md",placeholder:"Type a message..."},null,544),[[I,c.value]]),e("button",{onClick:v,class:"ml-2 bg-green-500 text-white px-4 py-2 rounded-lg"},"Send")])])):(o(),n("div",ne,"Welcome to Pagsasaka Chat"))],2)])],64))}};export{he as default};
