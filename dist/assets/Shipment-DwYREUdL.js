import"./lodash-CptZwStn.js";import{A as f,f as c,g as m,D as B,c as o,b as e,a as _,u as w,J as h,k as p,F as b,h as y,t as d,i as N,j as V,o as r,K as k}from"./index-T8YvT2Xm.js";const z={class:"flex h-screen bg-gray-100"},A={class:"flex-1 flex flex-col"},W={class:"bg-[#608C54] shadow p-4 flex justify-between items-center text-white"},E={class:"flex items-center space-x-4"},F={class:"relative"},M={key:0,class:"absolute right-0 mt-2 bg-white shadow-lg rounded p-2 w-48"},J={class:"p-5"},K={key:0},P={class:"mb-4 text-sm flex flex-wrap gap-2"},Y={key:0,class:"table-auto w-full border-collapse border border-gray-300"},q=["onClick"],G={class:"px-4 py-2"},H={class:"px-4 py-2"},Q={class:"px-4 py-2"},X={class:"px-4 py-2"},Z={class:"px-4 py-2"},ee={class:"text-lg font-bold"},te={class:"text-sm"},se={key:0},ae={class:"relative flex items-center justify-center mt-6"},ne={class:"flex space-x-10 md:space-x-20 z-10"},le={class:"flex space-x-4 md:space-x-[68px] justify-center text-center mt-2 text-xs md:text-sm"},oe={class:"flex justify-center mt-4"},ue={__name:"Shipment",setup(re){const i=N(),C=V(),O=f(()=>i.state.User.order.data);f(()=>i.state.User.cancel.data),f(()=>i.state.User.refund.data);const a=c(null),l=c("orders");function S(){i.dispatch("User/getOrderList")}m(()=>{S()});const L=n=>{a.value=n},x=[{id:"Order placed",label:"Order placed",icon:"hugeicons:package-process"},{id:"Waiting for courier",label:"Waiting for courier",icon:"ic:outline-local-shipping"},{id:"In transit",label:"In transit",icon:"la:shipping-fast"},{id:"Order delivered",label:"Order delivered",icon:"hugeicons:package-receive"}],R=n=>{if(!a.value)return"bg-gray-300";const t=x.map(T=>T.id.toLowerCase()),s=t.indexOf(a.value.status.toLowerCase()),u=t.indexOf(n.toLowerCase());return u<s?"bg-green-500":u===s?"bg-[#608C54]":"bg-gray-300"},g=B({id:"",status:""});async function I(){if(!a.value)return;const n=["Order placed","Waiting for courier","In transit","Order delivered"],t=n.indexOf(a.value.status);if(t===-1||t===n.length-1)return;const s=n[t+1];g.id=a.value.id,g.status=s,await i.dispatch("User/updateStatus",g).then(u=>{u.isSuccess&&(a.value.status=s)}).catch(u=>{console.error("Error updating status:",u)})}function U(){i.dispatch("User/getCancelList")}m(()=>{U()}),c(!1),c(null);function $(){i.dispatch("User/getRefundList")}m(()=>{$()});const v=c(!1),j=()=>{v.value=!v.value},D=async()=>{try{(await i.dispatch("logout")).isSuccess&&C.push({name:"Login"})}catch(n){console.error("Logout error:",n)}};return(n,t)=>(r(),o("div",z,[e("div",A,[e("header",W,[t[7]||(t[7]=e("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"Shipment",-1)),e("div",E,[e("div",F,[_(w(k),{icon:"uil:setting",class:"w-6 h-6 cursor-pointer",onClick:j}),v.value?(r(),o("div",M,[t[6]||(t[6]=e("button",{class:"w-full text-left px-4 py-2 text-sm text-black"},"Account Info",-1)),e("button",{class:"w-full text-left px-4 py-2 text-sm text-black",onClick:t[0]||(t[0]=s=>D())},"Logout")])):h("",!0)])])]),e("div",J,[a.value?(r(),o("div",{key:1,class:p(["p-5 border-2 rounded-md mt-2 text-center",{"border-blue-300":a.value.status==="Order","border-red-300 text-red-600":a.value.status==="Cancelled","border-yellow-300 text-yellow-600":a.value.status==="Refund","border-[#608C54]":a.value.status!=="Order"&&a.value.status!=="Cancelled"&&a.value.status!=="Refund"}])},[e("h1",ee,d(a.value.status)+" Shipment",1),e("p",te,d(a.value.status==="Order"?"This shipment is currently being processed.":a.value.status==="Cancelled"?"This shipment has been cancelled. Contact customer support for assistance.":a.value.status==="Refund"?"You should receive the refund in your account shortly.":"Tracking Details"),1),a.value.status!=="Cancelled"&&a.value.status!=="Refund"?(r(),o("div",se,[e("div",ae,[t[10]||(t[10]=e("div",{class:"absolute w-3/4 md:w-[480px] h-1 bg-[#608C54] top-1/2 z-0"},null,-1)),e("div",ne,[(r(),o(b,null,y(x,s=>e("div",{key:s.id,class:p(["w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center",R(s.id)])},[_(w(k),{icon:s.icon,class:"text-white w-6 h-6 md:w-8 md:h-8"},null,8,["icon"])],2)),64))])]),e("div",le,[(r(),o(b,null,y(x,s=>e("span",{key:s.id},d(s.label),1)),64))]),e("div",oe,[e("button",{onClick:t[4]||(t[4]=s=>I()),class:"px-4 py-2 md:px-6 md:py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md transition"}," Approve ")])])):h("",!0),e("button",{class:"mt-8 md:mt-12 px-4 py-2 bg-gray-300 rounded text-sm",onClick:t[5]||(t[5]=s=>a.value=null)}," Back to Shipments ")],2)):(r(),o("div",K,[e("div",P,[e("button",{class:p(["px-4 py-2 rounded transition",{"bg-blue-500 text-white":l.value==="orders","bg-gray-200":l.value!=="orders"}]),onClick:t[1]||(t[1]=s=>l.value="orders")}," My Orders",2),e("button",{class:p(["px-4 py-2 rounded transition",{"bg-red-500 text-white":l.value==="cancellations","bg-gray-200":l.value!=="cancellations"}]),onClick:t[2]||(t[2]=s=>l.value="cancellations")}," Cancellations",2),e("button",{class:p(["px-4 py-2 rounded transition",{"bg-yellow-500 text-white":l.value==="refunds","bg-gray-200":l.value!=="refunds"}]),onClick:t[3]||(t[3]=s=>l.value="refunds")}," Return and Refund",2)]),e("div",null,[l.value==="orders"?(r(),o("table",Y,[t[8]||(t[8]=e("thead",null,[e("tr",{class:"bg-gray-300"},[e("th",{class:"px-4 py-2"},"Name"),e("th",{class:"px-4 py-2"},"Created"),e("th",{class:"px-4 py-2"},"Last Updated"),e("th",{class:"px-4 py-2"},"Ship To"),e("th",{class:"px-4 py-2"},"Status")])],-1)),e("tbody",null,[(r(!0),o(b,null,y(O.value,s=>(r(),o("tr",{key:s.id,class:"even:bg-gray-50 hover:bg-gray-200 text-center text-sm cursor-pointer",onClick:u=>L(s)},[e("td",G,d(s.product_name),1),e("td",H,d(s.created_at),1),e("td",Q,d(s.updated_at),1),e("td",X,d(s.ship_to),1),e("td",Z,d(s.status),1)],8,q))),128))])])):h("",!0)]),t[9]||(t[9]=e("div",{class:"p-5 border-2 border-gray-300 rounded-md mt-2 text-center"},[e("h1",{class:"text-lg font-bold"},"Select a Shipment"),e("p",{class:"text-sm"},"Please select a shipment from the table to view tracking details.")],-1))]))])])]))}};export{ue as default};
