import{B as n}from"./BaseLabel-BGGc0Nu1.js";import{_ as p}from"./BaseInputField-CSShvpjw.js";import{A as I,i as F,D as R,f,c as v,b as s,l as P,a as l,u as V,I as C,t as w,w as d,j as O,o as _,e as u}from"./index-uLLRMIoJ.js";/* empty css                                                              */import"./lodash-CL_KSIKK.js";const T={class:"h-screen bg-gray-300"},W={class:"bg-[#285a19] shadow p-4 flex justify-between items-center text-white"},Y={class:"relative inline-block text-left"},$={class:"flex items-center space-x-2"},q=["src"],G={key:0,class:"absolute right-0 z-50 mt-2 w-48 bg-white rounded shadow-lg"},H={class:"w-full flex justify-center px-4 py-20"},J={class:"w-1/2 max-w-4xl p-6 bg-white shadow-lg rounded-lg"},K={class:"text-center"},Q=["src"],X={class:"mt-4 text-lg sm:text-xl font-semibold"},Z={class:"text-gray-600 text-sm sm:text-base"},ee={class:"text-gray-600 text-sm sm:text-base"},se={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center px-4 z-50"},te={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},oe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},le={class:"bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto shadow-lg"},ae={class:"space-y-3"},re={class:"relative"},ie={class:"relative"},fe={__name:"Rider_Profile",setup(ne){const b=F(),D=O(),o=I(()=>{var r;return((r=b.state.userData.data)==null?void 0:r.user)||{}}),a=R({first_name:o.value.first_name||"",middle_name:o.value.middle_name||"",last_name:o.value.last_name||"",email:o.value.email||"",phone_number:o.value.phone_number||""}),N=async()=>{var r,e;try{await b.dispatch("updateProfile",{id:o.value.id,first_name:a.first_name,middle_name:a.middle_name,last_name:a.last_name,phone_number:a.phone_number,delivery_address:a.delivery_address,email:a.email}),j()}catch(t){if((e=(r=t.response)==null?void 0:r.data)!=null&&e.errors){const c=t.response.data.errors,m=Object.keys(c)[0];m&&alert(c[m][0])}else console.error("Error updating profile:",t),alert("An unexpected error occurred.")}},h=f(!1),B=()=>{h.value=!0},j=()=>{h.value=!1},i=R({password:o.value.password||"",password_confirmation:o.value.password_confirmation||""}),x=f(!1),M=()=>{x.value=!x.value},g=f(!1),S=()=>{g.value=!g.value},y=f(!1),U=()=>{y.value=!0},E=()=>{y.value=!1},A=async()=>{var r,e;try{if(i.password!==i.password_confirmation){alert("Passwords do not match");return}await b.dispatch("updatePassword",{id:o.value.id,password:i.password,password_confirmation:i.password_confirmation}),E(),i.password="",i.password_confirmation=""}catch(t){if((e=(r=t.response)==null?void 0:r.data)!=null&&e.errors){const c=t.response.data.errors,m=Object.keys(c)[0];m&&alert(c[m][0])}else console.error("Error updating password:",t),alert("An unexpected error occurred.")}},k=f(!1),L=()=>{k.value=!k.value},z=async()=>{try{(await b.dispatch("logout")).isSuccess&&D.push({name:"Login"})}catch(r){console.error("Logout error:",r)}};return(r,e)=>(_(),v("div",T,[s("header",W,[e[6]||(e[6]=s("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"Welcome to Rider Profile",-1)),s("div",Y,[s("div",$,[s("img",{src:o.value.avatar,alt:"Profile",class:"w-10 h-10 rounded-full object-cover shadow-md"},null,8,q),l(V(C),{icon:"uil:setting",width:"24",height:"24",class:"cursor-pointer text-white",onClick:L})]),k.value?(_(),v("div",G,[e[5]||(e[5]=s("a",{href:"/rider_profile",class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"}," Account Info ",-1)),s("button",{onClick:z,class:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100"}," Logout ")])):P("",!0)])]),s("div",H,[s("div",J,[s("div",K,[s("img",{src:o.value.profilePic,alt:"Profile Picture",class:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-44 lg:h-44 mx-auto rounded-full"},null,8,Q),s("h2",X,w(o.value.first_name)+" "+w(o.value.middle_name)+" "+w(o.value.last_name),1),s("p",Z,w(o.value.email),1),s("p",ee,w(o.value.phone_number),1)]),s("div",{class:"flex justify-center mt-6 gap-4 text-xs sm:mt-10"},[s("button",{onClick:B,class:"px-6 max-w-xs rounded-full sm:max-w-sm lg:max-w-md bg-green-800 text-white py-2 hover:bg-green-600"}," Edit Profile"),s("button",{class:"bg-red-700 text-white px-2 py-2 rounded-full hover:bg-red-500 transition",onClick:U}," Change Password")])])]),h.value?(_(),v("div",se,[s("div",te,[l(n,{class:"text-xl font-semibold mb-4"},{default:d(()=>e[7]||(e[7]=[u("Edit Profile")])),_:1}),l(n,{class:"block mb-2"},{default:d(()=>e[8]||(e[8]=[u("Name")])),_:1}),l(p,{modelValue:a.first_name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.first_name=t),class:"w-full p-2 border rounded mb-4",type:"text"},null,8,["modelValue"]),l(n,{class:"block mb-2"},{default:d(()=>e[9]||(e[9]=[u("Email")])),_:1}),l(p,{modelValue:a.email,"onUpdate:modelValue":e[1]||(e[1]=t=>a.email=t),class:"w-full p-2 border rounded mb-4",type:"email"},null,8,["modelValue"]),l(n,{class:"block mb-2"},{default:d(()=>e[10]||(e[10]=[u("Phone")])),_:1}),l(p,{modelValue:a.phone_number,"onUpdate:modelValue":e[2]||(e[2]=t=>a.phone_number=t),class:"w-full p-2 border rounded mb-4",type:"text"},null,8,["modelValue"]),s("div",{class:"flex justify-end gap-2 text-sm"},[s("button",{onClick:j,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:N,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])):P("",!0),y.value?(_(),v("div",oe,[s("div",le,[e[13]||(e[13]=s("h2",{class:"text-lg font-semibold mb-4"},"Change Password",-1)),s("div",ae,[s("div",re,[l(n,{class:"font-semibold"},{default:d(()=>e[11]||(e[11]=[u("*New Password")])),_:1}),l(p,{modelValue:i.password,"onUpdate:modelValue":e[3]||(e[3]=t=>i.password=t),type:x.value?"text":"password",placeholder:"Enter Your Password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:M},[l(V(C),{icon:x.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",ie,[l(n,{class:"font-semibold"},{default:d(()=>e[12]||(e[12]=[u("*Re-enter Password")])),_:1}),l(p,{modelValue:i.password_confirmation,"onUpdate:modelValue":e[4]||(e[4]=t=>i.password_confirmation=t),type:g.value?"text":"password",placeholder:"Re-enter password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:S},[l(V(C),{icon:g.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",{class:"flex justify-end space-x-2 pt-2"},[s("button",{type:"button",onClick:E,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:A,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])])):P("",!0)]))}};export{fe as default};
