import{L as T,T as V}from"./Toast-DPTShiPi.js";import{c as $,r as N,u as q,B as E}from"./BaseError-zNZEsfn0.js";import{A as m,i as F,f as i,D as P,g as j,c as n,E as f,l as p,a as _,b as t,u as h,I as A,F as x,h as O,t as l,w as U,j as z,o,e as M}from"./index-PUpkw_HF.js";/* empty css                                                              */const J={class:"bg-[#285a19] shadow p-4 flex justify-between items-center text-white"},Q={class:"relative inline-block text-left"},W={class:"flex items-center space-x-2"},G=["src"],H={key:0,class:"absolute right-0 z-50 mt-2 w-48 bg-white rounded shadow-lg"},K={class:"flex h-96"},X={class:"flex-1 p-6"},Y={key:0,class:"p-4"},Z={class:"max-h-[400px] overflow-y-auto border border-gray-300 rounded"},tt={class:"w-full border-collapse"},et=["onClick"],st={class:"border p-2"},at={class:"border p-2"},ot={class:"border p-2"},rt={class:"border p-2"},lt={class:"border p-2 text-green-500"},it={key:1,class:"max-w-lg mx-auto mt-10 p-6 bg-white shadow-md rounded-lg"},nt={class:"text-xl font-bold text-center"},dt={class:"mt-4 flex flex-col items-center"},bt={__name:"Rider_Dashboard",setup(ct){const d=F(),b=z(),v=m(()=>d.state.Rider.intransitList.data),y=m(()=>{var e;return((e=d.state.userData.data)==null?void 0:e.user)||{}});function w(){d.dispatch("Rider/getIntransitList")}i({name:"John Doe",status:"Online",profileImage:"https://via.placeholder.com/100"}),i({today:"",week:"",month:""}),i([{id:1234,status:"Pending"},{id:1235,status:"Pending"}]);const r=i(null),k=e=>{r.value=e},D=i(null),c=P({image:""}),C=e=>{c.image=e.target.files[0]},I=m(()=>({image:{required:$.withMessage("image is required",N)}})),u=q(I,c);async function L(){if(!await u.value.$validate())return;if(!r.value){console.error("Error: selectedTransit is undefined");return}const s=new FormData;s.append("image",c.image),s.append("id",r.value.id),await d.dispatch("Rider/sendImage",{id:r.value.id,formData:s}).then(a=>{a.isSuccess&&b.push({name:"Rider_Dashboard"})})}const R=()=>{r.value=null,D.value=null},g=i(!1);function B(){g.value=!g.value}const S=async()=>{try{(await d.dispatch("logout")).isSuccess&&b.push({name:"Login"})}catch(e){console.error("Logout error:",e)}};return j(()=>{w()}),(e,s)=>(o(),n(x,null,[e.showLoading?(o(),f(T,{key:0,class:"loading"})):p("",!0),_(V),t("div",null,[t("header",J,[s[1]||(s[1]=t("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"Welcome to Rider Profile",-1)),t("div",Q,[t("div",W,[t("img",{src:y.value.avatar,alt:"Profile",class:"w-10 h-10 rounded-full object-cover shadow-md"},null,8,G),_(h(A),{icon:"uil:setting",width:"24",height:"24",class:"cursor-pointer text-white",onClick:B})]),g.value?(o(),n("div",H,[s[0]||(s[0]=t("a",{href:"/rider_profile",class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"}," Account Info ",-1)),t("button",{onClick:S,class:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100"}," Logout ")])):p("",!0)])]),t("div",K,[t("main",X,[r.value?(o(),n("div",it,[t("h2",nt,"Upload Image for Order #"+l(r.value.id),1),t("div",dt,[t("input",{type:"file",onChange:C,accept:"image/*,application/pdf",class:"w-full border p-2 rounded"},null,32),h(u).image.$error?(o(),f(E,{key:0},{default:U(()=>[M(l(h(u).image.$errors[0].$message),1)]),_:1})):p("",!0),t("button",{onClick:L,class:"mt-4 px-6 py-2 bg-green-800 text-white rounded-lg hover:bg-green-600"}," Upload ")]),t("button",{onClick:R,class:"mt-4 px-4 py-2 bg-gray-300 rounded"}," Back ")])):(o(),n("div",Y,[s[3]||(s[3]=t("h3",{class:"text-lg font-semibold mt-6 mb-2"},"Intransit Deliveries",-1)),t("div",Z,[t("table",tt,[s[2]||(s[2]=t("thead",{class:"bg-gray-200 sticky top-0 z-10"},[t("tr",null,[t("th",{class:"border text-start p-2 bg-gray-200"},"Customer Name"),t("th",{class:"border text-start p-2 bg-gray-200"},"Ship to"),t("th",{class:"border text-start p-2 bg-gray-200"},"Quantity"),t("th",{class:"border text-start p-2 bg-gray-200"},"Total Amount"),t("th",{class:"border text-start p-2 bg-gray-200"},"Status")])],-1)),t("tbody",null,[(o(!0),n(x,null,O(v.value,a=>(o(),n("tr",{key:a.id,onClick:ut=>k(a),class:"cursor-pointer hover:bg-gray-200"},[t("td",st,l(a.customer_name),1),t("td",at,l(a.ship_to),1),t("td",ot,l(a.quantity),1),t("td",rt,l(a.total_amount),1),t("td",lt,l(a.status),1)],8,et))),128))])])])]))])])])],64))}};export{bt as default};
