import{B as i}from"./BaseLabel-GcntomVh.js";import{_ as p}from"./BaseInputField-CvHzoY9q.js";import{A as R,i as S,D as k,f as b,c as y,b as s,l as C,t as f,a,w as d,u as E,I as j,j as F,o as h,e as m}from"./index-XLSrkNqX.js";/* empty css                                                              */import"./lodash-0l3xrD9P.js";const z={class:"min-h-screen bg-gray-300"},I={class:"flex justify-center px-4 py-10 sm:py-16 md:py-20"},O={class:"w-full sm:w-3/4 md:w-2/3 lg:w-1/2 xl:w-2/5 2xl:w-2/5 p-4 mt-[150px] sm:p-6 bg-white shadow-lg rounded-lg"},L={class:"text-center"},T=["src"],Y={class:"mt-4 text-base sm:text-lg md:text-xl font-semibold"},$={class:"text-gray-600 text-xs sm:text-sm md:text-base"},q={class:"text-gray-600 text-xs sm:text-sm md:text-base"},G={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center px-4 z-50"},H={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-sm sm:max-w-md"},J={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 px-4"},K={class:"bg-white rounded-xl p-6 w-full max-w-sm sm:max-w-md max-h-[90vh] overflow-y-auto shadow-lg"},Q={class:"space-y-4"},W={class:"relative"},X={class:"relative"},le={__name:"Administrator_Profile",setup(Z){const g=S();F();const o=R(()=>{var n;return(n=g.state.userData.data)==null?void 0:n.user}),l=k({first_name:o.value.first_name||"",middle_name:o.value.middle_name||"",last_name:o.value.last_name||"",email:o.value.email||"",phone_number:o.value.phone_number||""}),A=async()=>{var n,e;try{await g.dispatch("updateProfile",{id:o.value.id,first_name:l.first_name,middle_name:l.middle_name,last_name:l.last_name,phone_number:l.phone_number,delivery_address:l.delivery_address,email:l.email}),P()}catch(t){if((e=(n=t.response)==null?void 0:n.data)!=null&&e.errors){const u=t.response.data.errors,c=Object.keys(u)[0];c&&alert(u[c][0])}else console.error("Error updating profile:",t),alert("An unexpected error occurred.")}},v=b(!1),N=()=>{v.value=!0},P=()=>{v.value=!1},r=k({password:o.value.password||"",password_confirmation:o.value.password_confirmation||""}),w=b(!1),B=()=>{w.value=!w.value},x=b(!1),D=()=>{x.value=!x.value},_=b(!1),M=()=>{_.value=!0},V=()=>{_.value=!1},U=async()=>{var n,e;try{if(r.password!==r.password_confirmation){alert("Passwords do not match");return}await g.dispatch("updatePassword",{id:o.value.id,password:r.password,password_confirmation:r.password_confirmation}),V(),r.password="",r.password_confirmation=""}catch(t){if((e=(n=t.response)==null?void 0:n.data)!=null&&e.errors){const u=t.response.data.errors,c=Object.keys(u)[0];c&&alert(u[c][0])}else console.error("Error updating password:",t),alert("An unexpected error occurred.")}};return(n,e)=>(h(),y("div",z,[s("div",I,[s("div",O,[s("div",L,[s("img",{src:o.value.profilePic,alt:"Profile Picture",class:"mx-auto rounded-full w-24 h-24 sm:w-32 sm:h-32 md:w-36 md:h-36 lg:w-40 lg:h-40 xl:w-44 xl:h-44 2xl:w-48 2xl:h-48"},null,8,T),s("h2",Y,f(o.value.first_name)+" "+f(o.value.middle_name)+" "+f(o.value.last_name),1),s("p",$,f(o.value.email),1),s("p",q,f(o.value.phone_number),1)]),s("div",{class:"flex flex-col sm:flex-row justify-center items-center gap-3 mt-6 sm:mt-10 text-sm"},[s("button",{onClick:N,class:"w-full sm:w-auto px-6 py-2 bg-green-800 text-white rounded-full hover:bg-green-600 transition"}," Edit Profile "),s("button",{onClick:M,class:"w-full sm:w-auto px-6 py-2 bg-red-700 text-white rounded-full hover:bg-red-500 transition"}," Change Password ")])])]),v.value?(h(),y("div",G,[s("div",H,[a(i,{class:"text-lg sm:text-xl font-semibold mb-4"},{default:d(()=>e[5]||(e[5]=[m("Edit Profile")])),_:1}),a(i,{class:"block mb-2"},{default:d(()=>e[6]||(e[6]=[m("First Name")])),_:1}),a(p,{modelValue:l.first_name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.first_name=t),class:"w-full mb-4",type:"text"},null,8,["modelValue"]),a(i,{class:"block mb-2"},{default:d(()=>e[7]||(e[7]=[m("Email")])),_:1}),a(p,{modelValue:l.email,"onUpdate:modelValue":e[1]||(e[1]=t=>l.email=t),class:"w-full mb-4",type:"email"},null,8,["modelValue"]),a(i,{class:"block mb-2"},{default:d(()=>e[8]||(e[8]=[m("Phone")])),_:1}),a(p,{modelValue:l.phone_number,"onUpdate:modelValue":e[2]||(e[2]=t=>l.phone_number=t),class:"w-full mb-4",type:"text"},null,8,["modelValue"]),s("div",{class:"flex justify-end gap-2 text-sm"},[s("button",{onClick:P,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:A,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])):C("",!0),_.value?(h(),y("div",J,[s("div",K,[e[11]||(e[11]=s("h2",{class:"text-lg font-semibold mb-4"},"Change Password",-1)),s("div",Q,[s("div",W,[a(i,{class:"font-semibold"},{default:d(()=>e[9]||(e[9]=[m("*New Password")])),_:1}),a(p,{modelValue:r.password,"onUpdate:modelValue":e[3]||(e[3]=t=>r.password=t),type:w.value?"text":"password",placeholder:"Enter Your Password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:B},[a(E(j),{icon:w.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",X,[a(i,{class:"font-semibold"},{default:d(()=>e[10]||(e[10]=[m("*Re-enter Password")])),_:1}),a(p,{modelValue:r.password_confirmation,"onUpdate:modelValue":e[4]||(e[4]=t=>r.password_confirmation=t),type:x.value?"text":"password",placeholder:"Re-enter password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:D},[a(E(j),{icon:x.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",{class:"flex justify-end space-x-2"},[s("button",{type:"button",onClick:V,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:U,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])])):C("",!0)]))}};export{le as default};
