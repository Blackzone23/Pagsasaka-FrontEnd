import"./lodash-CcS-58x4.js";import{A as v,f as p,g as b,D as T,c as r,b as t,a as w,u as _,J as k,k as x,F as y,h,e as c,t as n,i as V,j as B,o as i,K as C}from"./index-hJ16NlVa.js";const z={class:"flex h-screen bg-gray-100"},A={class:"flex-1 flex flex-col"},W={class:"bg-[#608C54] shadow p-4 flex justify-between items-center text-white"},E={class:"flex items-center space-x-4"},F={class:"relative"},M={key:0,class:"absolute right-0 mt-2 bg-white shadow-lg rounded p-2 w-40 sm:w-48"},J={class:"p-3 sm:p-5"},K={key:0},P={class:"mb-4 text-xs sm:text-sm flex flex-wrap gap-2"},q={class:"overflow-x-auto"},G={key:0,class:"w-full border-collapse border border-gray-300 text-xs sm:text-sm"},H={class:"px-2 sm:px-4 py-2"},Q={class:"px-2 sm:px-4 py-2"},X={class:"px-2 sm:px-4 py-2"},Y={class:"px-2 sm:px-4 py-2"},Z={class:"px-2 sm:px-4 py-2"},tt={key:1,class:"p-3 sm:p-5 border-2 border-[#608C54] rounded-md"},et={class:"text-xs sm:text-sm"},st={class:"relative flex flex-col items-center md:flex-row md:justify-center"},lt={class:"flex flex-wrap justify-center space-x-3 sm:space-x-10 z-10"},nt={class:"flex flex-wrap justify-center space-x-4 sm:space-x-8 text-xs sm:text-sm mt-2"},ot={class:"flex justify-center mt-4"},dt={__name:"Shipment",setup(at){const d=V(),S=B(),L=v(()=>d.state.User.order.data);v(()=>d.state.User.cancel.data),v(()=>d.state.User.refund.data);const l=p(null),o=p("orders");function O(){d.dispatch("User/getOrderList")}b(()=>{O()});const m=[{id:"Order placed",label:"Order placed",icon:"hugeicons:package-process"},{id:"Waiting for courier",label:"Waiting for courier",icon:"ic:outline-local-shipping"},{id:"In transit",label:"In transit",icon:"la:shipping-fast"},{id:"Order delivered",label:"Order delivered",icon:"hugeicons:package-receive"}],U=a=>{if(!l.value)return"bg-gray-300";const e=m.map(R=>R.id.toLowerCase()),s=e.indexOf(l.value.status.toLowerCase()),u=e.indexOf(a.toLowerCase());return u<s?"bg-green-500":u===s?"bg-[#608C54]":"bg-gray-300"},g=T({id:"",status:""});async function I(){if(!l.value)return;const a=["Order placed","Waiting for courier","In transit","Order delivered"],e=a.indexOf(l.value.status);if(e===-1||e===a.length-1)return;const s=a[e+1];g.id=l.value.id,g.status=s,await d.dispatch("User/updateStatus",g).then(u=>{u.isSuccess&&(l.value.status=s)}).catch(u=>{console.error("Error updating status:",u)})}function j(){d.dispatch("User/getCancelList")}b(()=>{j()}),p(!1),p(null);function N(){d.dispatch("User/getRefundList")}b(()=>{N()});const f=p(!1),$=()=>{f.value=!f.value},D=async()=>{try{(await d.dispatch("logout")).isSuccess&&S.push({name:"Login"})}catch(a){console.error("Logout error:",a)}};return(a,e)=>(i(),r("div",z,[t("div",A,[t("header",W,[e[7]||(e[7]=t("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"Shipment",-1)),t("div",E,[t("div",F,[w(_(C),{icon:"uil:setting",width:"24",height:"24",style:{color:"white"},onClick:$}),f.value?(i(),r("div",M,[e[6]||(e[6]=t("button",{class:"w-full text-left px-4 py-2 text-sm text-black"},"Account Info",-1)),t("button",{class:"w-full text-left px-4 py-2 text-sm text-black",onClick:e[0]||(e[0]=s=>D())},"Logout")])):k("",!0)])])]),t("div",J,[l.value?(i(),r("div",tt,[e[16]||(e[16]=t("h1",{class:"text-sm sm:text-xl font-bold"},"Tracking Details",-1)),t("div",et,[t("p",null,[e[10]||(e[10]=t("strong",null,"Shipment Name:",-1)),c(" "+n(l.value.product_name),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Created:",-1)),c(" "+n(l.value.created_at),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Last Updated:",-1)),c(" "+n(l.value.updated_at),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Ship To:",-1)),c(" "+n(l.value.ship_to),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Status:",-1)),c(" "+n(l.value.status),1)])]),t("div",st,[e[15]||(e[15]=t("div",{class:"absolute w-full md:w-[480px] h-1 bg-[#608C54] top-1/2 z-0"},null,-1)),t("div",lt,[(i(),r(y,null,h(m,s=>t("div",{key:s.id,class:x(["w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center",U(s.id)])},[w(_(C),{icon:s.icon,width:"24",height:"24",class:"text-white"},null,8,["icon"])],2)),64))])]),t("div",nt,[(i(),r(y,null,h(m,s=>t("span",{key:s.id},n(s.label),1)),64))]),t("div",ot,[t("button",{onClick:e[4]||(e[4]=s=>I()),class:"px-4 sm:px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md transition"}," Approve ")]),t("button",{class:"mt-10 px-3 sm:px-4 py-2 bg-gray-300 rounded text-xs sm:text-sm",onClick:e[5]||(e[5]=s=>l.value=null)},"Back to Shipments")])):(i(),r("div",K,[t("div",P,[t("button",{class:x(["px-3 sm:px-4 py-1 sm:py-2 rounded",{"bg-blue-500 text-white":o.value==="orders","bg-gray-200":o.value!=="orders"}]),onClick:e[1]||(e[1]=s=>o.value="orders")},"My Orders",2),t("button",{class:x(["px-3 sm:px-4 py-1 sm:py-2 rounded",{"bg-red-500 text-white":o.value==="cancellations","bg-gray-200":o.value!=="cancellations"}]),onClick:e[2]||(e[2]=s=>o.value="cancellations")},"Cancellations",2),t("button",{class:x(["px-3 sm:px-4 py-1 sm:py-2 rounded",{"bg-yellow-500 text-white":o.value==="refunds","bg-gray-200":o.value!=="refunds"}]),onClick:e[3]||(e[3]=s=>o.value="refunds")},"Return and Refund",2)]),t("div",q,[o.value==="orders"?(i(),r("table",G,[e[8]||(e[8]=t("thead",null,[t("tr",{class:"bg-gray-300"},[t("th",{class:"px-2 sm:px-4 py-2"},"Name"),t("th",{class:"px-2 sm:px-4 py-2"},"Created"),t("th",{class:"px-2 sm:px-4 py-2"},"Last Updated"),t("th",{class:"px-2 sm:px-4 py-2"},"Ship To"),t("th",{class:"px-2 sm:px-4 py-2"},"Status")])],-1)),t("tbody",null,[(i(!0),r(y,null,h(L.value,s=>(i(),r("tr",{key:s.id,class:"even:bg-gray-50 cursor-pointer hover:bg-gray-200 text-center"},[t("td",H,n(s.product_name),1),t("td",Q,n(s.created_at),1),t("td",X,n(s.updated_at),1),t("td",Y,n(s.ship_to),1),t("td",Z,n(s.status),1)]))),128))])])):k("",!0)]),e[9]||(e[9]=t("div",{class:"p-3 sm:p-5 border-2 border-gray-300 rounded-md mt-2"},[t("h1",{class:"text-sm sm:text-xl font-bold"},"Select a Shipment"),t("p",{class:"text-xs sm:text-sm"},"Please select a shipment from the table to view tracking details.")],-1))]))])])]))}};export{dt as default};
