import"./lodash-CL_KSIKK.js";import{A as p,i as W,f as x,g as m,D as E,c as o,b as t,l as u,a as k,u as C,I as S,k as h,F as g,h as v,t as l,j as F,o as r}from"./index-uLLRMIoJ.js";const M={class:"flex h-[800px] bg-gray-100"},P={class:"flex-1 flex flex-col"},Y={class:"bg-[#285a19] shadow p-4 flex justify-between items-center text-white"},q={class:"flex items-center space-x-4"},G={class:"relative inline-block text-left"},H={class:"flex items-center space-x-2"},J=["src"],K={key:0,class:"absolute right-0 z-50 mt-2 w-48 bg-white rounded shadow-lg"},Q={class:"p-5"},X={key:0},Z={class:"mb-4 text-sm flex flex-wrap gap-2"},tt={key:0,class:"table-auto w-full border-collapse border border-gray-300"},et=["onClick"],st={class:"px-4 py-2"},at={class:"px-4 py-2"},lt={class:"px-4 py-2"},ot={class:"px-4 py-2"},rt={class:"px-4 py-2"},nt={key:0,class:"table-auto w-full border-collapse border border-gray-300"},dt=["onClick"],it={class:"px-4 py-2"},ct={class:"px-4 py-2"},ut={class:"px-4 py-2"},pt={class:"px-4 py-2"},xt={class:"px-4 py-2"},ht={key:0,class:"table-auto w-full border-collapse border border-gray-300"},gt=["onClick"],vt={class:"px-4 py-2"},mt={class:"px-4 py-2"},yt={class:"px-4 py-2"},bt={class:"px-4 py-2"},_t={class:"px-4 py-2"},ft={class:"flex-1 text-center"},wt={class:"text-lg font-bold"},kt={class:"text-sm"},Ct={key:0},St={class:"relative flex items-center justify-center mt-6"},Lt={class:"flex space-x-10 md:space-x-[60px] z-10"},Ot={class:"flex space-x-4 md:space-x-[47px] justify-center items-center text-center mt-2 text-xs md:text-sm"},It={class:"flex justify-center mt-4"},Ut={key:0,class:"flex justify-center items-center mt-6 md:mt-0"},Rt=["src"],Dt={__name:"Shipment",setup(jt){const d=W(),L=F(),O=p(()=>d.state.User.order.data),I=p(()=>d.state.User.cancel.data),U=p(()=>d.state.User.refund.data),y=p(()=>d.state.User.order.image),a=x(null),i=x("orders"),R=p(()=>{var n;return((n=d.state.userData.data)==null?void 0:n.user)||{}});function j(){d.dispatch("User/getOrderList")}m(()=>{j()});function $(){d.dispatch("User/getImage")}m(()=>{$()});const b=n=>{a.value=n,d.dispatch("User/getImage",n.id)},_=[{id:"Order placed",label:"Order placed",icon:"hugeicons:package-process"},{id:"Waiting for courier",label:"Waiting for courier",icon:"ic:outline-local-shipping"},{id:"In transit",label:"In transit",icon:"la:shipping-fast"},{id:"Order delivered",label:"Order delivered",icon:"hugeicons:package-receive"}],T=n=>{if(!a.value)return"bg-gray-300";const s=_.map(A=>A.id.toLowerCase()),e=s.indexOf(a.value.status.toLowerCase()),c=s.indexOf(n.toLowerCase());return c<e?"bg-green-500":c===e?"bg-[#608C54]":"bg-gray-300"},f=E({id:"",status:""});async function D(){if(!a.value)return;const n=["Order placed","Waiting for courier","In transit","Order delivered"],s=n.indexOf(a.value.status);if(s===-1||s===n.length-1)return;const e=n[s+1];f.id=a.value.id,f.status=e,await d.dispatch("User/updateStatus",f).then(c=>{c.isSuccess&&(a.value.status=e)}).catch(c=>{console.error("Error updating status:",c)})}function N(){d.dispatch("User/getCancelList")}m(()=>{N()}),x(!1),x(null);function z(){d.dispatch("User/getRefundList")}m(()=>{z()});const w=x(!1),B=()=>{w.value=!w.value},V=async()=>{try{(await d.dispatch("logout")).isSuccess&&L.push({name:"Login"})}catch(n){console.error("Logout error:",n)}};return(n,s)=>(r(),o("div",M,[t("div",P,[t("header",Y,[s[6]||(s[6]=t("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"Shipment",-1)),t("div",q,[t("div",G,[t("div",H,[t("img",{src:R.value.avatar,alt:"Profile",class:"w-10 h-10 rounded-full object-cover shadow-md"},null,8,J),k(C(S),{icon:"uil:setting",width:"24",height:"24",class:"cursor-pointer text-white",onClick:B})]),w.value?(r(),o("div",K,[s[5]||(s[5]=t("a",{href:"/seller-profile",class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"}," Account Info ",-1)),t("button",{onClick:V,class:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100"}," Logout ")])):u("",!0)])])]),t("div",Q,[a.value?(r(),o("div",{key:1,class:h(["p-5 border-2 rounded-md mt-2 text-center flex flex-col md:flex-row items-center md:items-start",{"border-blue-300":a.value.status==="Order","border-red-300 text-red-600":a.value.status==="Cancelled","border-yellow-300 text-yellow-600":a.value.status==="Refund","border-[#608C54]":a.value.status!=="Order"&&a.value.status!=="Cancelled"&&a.value.status!=="Refund"}])},[t("div",ft,[t("h1",wt,l(a.value.status)+" Shipment",1),t("p",kt,l(a.value.status==="Order"?"This shipment is currently being processed.":a.value.status==="Cancelled"?"This shipment has been cancelled. Contact customer support for assistance.":a.value.status==="Refund"?"You should receive the refund in your account shortly.":"Tracking Details"),1),a.value.status!=="Cancelled"&&a.value.status!=="Refund"?(r(),o("div",Ct,[t("div",St,[s[11]||(s[11]=t("div",{class:"absolute w-3/4 md:w-[430px] h-1 bg-[#608C54] top-1/2 z-0"},null,-1)),t("div",Lt,[(r(),o(g,null,v(_,e=>t("div",{key:e.id,class:h(["w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center",T(e.id)])},[k(C(S),{icon:e.icon,class:"text-white w-6 h-6 md:w-8 md:h-8"},null,8,["icon"])],2)),64))])]),t("div",Ot,[(r(),o(g,null,v(_,e=>t("span",{key:e.id},l(e.label),1)),64))]),t("div",It,[t("button",{onClick:s[3]||(s[3]=e=>D()),class:"px-4 py-2 md:px-6 md:py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md transition"}," Approve ")])])):u("",!0),t("button",{class:"mt-8 md:mt-12 px-4 py-2 bg-gray-300 rounded text-sm",onClick:s[4]||(s[4]=e=>a.value=null)}," Back to Shipments ")]),y.value&&y.value.delivery_proof?(r(),o("div",Ut,[t("img",{src:y.value.delivery_proof,alt:"Shipment Image",class:"border border-gray-500 w-[280px] h-[300px] md:w-[350px] md:h-[400px] rounded-lg shadow-md object-cover"},null,8,Rt)])):u("",!0)],2)):(r(),o("div",X,[t("div",Z,[t("button",{class:h(["px-4 py-2 rounded transition",{"bg-blue-500 text-white":i.value==="orders","bg-gray-200":i.value!=="orders"}]),onClick:s[0]||(s[0]=e=>i.value="orders")}," My Orders",2),t("button",{class:h(["px-4 py-2 rounded transition",{"bg-red-500 text-white":i.value==="cancellations","bg-gray-200":i.value!=="cancellations"}]),onClick:s[1]||(s[1]=e=>i.value="cancellations")}," Cancellations",2),t("button",{class:h(["px-4 py-2 rounded transition",{"bg-yellow-500 text-white":i.value==="refunds","bg-gray-200":i.value!=="refunds"}]),onClick:s[2]||(s[2]=e=>i.value="refunds")}," Return and Refund",2)]),t("div",null,[i.value==="orders"?(r(),o("table",tt,[s[7]||(s[7]=t("thead",null,[t("tr",{class:"bg-gray-300"},[t("th",{class:"px-4 py-2"},"Name"),t("th",{class:"px-4 py-2"},"Created"),t("th",{class:"px-4 py-2"},"Last Updated"),t("th",{class:"px-4 py-2"},"Ship To"),t("th",{class:"px-4 py-2"},"Status")])],-1)),t("tbody",null,[(r(!0),o(g,null,v(O.value,e=>(r(),o("tr",{key:e.id,class:"even:bg-gray-50 hover:bg-gray-200 text-center text-sm cursor-pointer",onClick:c=>b(e)},[t("td",st,l(e.product_name),1),t("td",at,l(e.created_at),1),t("td",lt,l(e.updated_at),1),t("td",ot,l(e.ship_to),1),t("td",rt,l(e.status),1)],8,et))),128))])])):u("",!0)]),t("div",null,[i.value==="cancellations"?(r(),o("table",nt,[s[8]||(s[8]=t("thead",null,[t("tr",{class:"bg-gray-300"},[t("th",{class:"px-4 py-2"},"Name"),t("th",{class:"px-4 py-2"},"Created"),t("th",{class:"px-4 py-2"},"Last Updated"),t("th",{class:"px-4 py-2"},"Ship To"),t("th",{class:"px-4 py-2"},"Status")])],-1)),t("tbody",null,[(r(!0),o(g,null,v(I.value,e=>(r(),o("tr",{key:e.id,class:"even:bg-gray-50 hover:bg-gray-200 text-center text-sm cursor-pointer",onClick:c=>b(e)},[t("td",it,l(e.product_name),1),t("td",ct,l(e.created_at),1),t("td",ut,l(e.updated_at),1),t("td",pt,l(e.ship_to),1),t("td",xt,l(e.status),1)],8,dt))),128))])])):u("",!0)]),t("div",null,[i.value==="refunds"?(r(),o("table",ht,[s[9]||(s[9]=t("thead",null,[t("tr",{class:"bg-gray-300"},[t("th",{class:"px-4 py-2"},"Name"),t("th",{class:"px-4 py-2"},"Created"),t("th",{class:"px-4 py-2"},"Last Updated"),t("th",{class:"px-4 py-2"},"Ship To"),t("th",{class:"px-4 py-2"},"Status")])],-1)),t("tbody",null,[(r(!0),o(g,null,v(U.value,e=>(r(),o("tr",{key:e.id,class:"even:bg-gray-50 hover:bg-gray-200 text-center text-sm cursor-pointer",onClick:c=>b(e)},[t("td",vt,l(e.product_name),1),t("td",mt,l(e.created_at),1),t("td",yt,l(e.updated_at),1),t("td",bt,l(e.ship_to),1),t("td",_t,l(e.status),1)],8,gt))),128))])])):u("",!0)]),s[10]||(s[10]=t("div",{class:"p-5 border-2 border-gray-300 rounded-md mt-2 text-center"},[t("h1",{class:"text-lg font-bold"},"Select a Shipment"),t("p",{class:"text-sm"},"Please select a shipment from the table to view tracking details.")],-1))]))])])]))}};export{Dt as default};
