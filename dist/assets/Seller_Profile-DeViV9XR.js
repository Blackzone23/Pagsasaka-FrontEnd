import{B as i}from"./BaseLabel-B7hqSrQm.js";import{_ as p}from"./BaseInputField-FGXD96C8.js";import{A as U,i as A,D as E,f as x,c as g,b as s,l as P,a as l,u as k,I as V,t as f,w as d,F,j as I,o as v,e as u}from"./index-C6ga6Tkl.js";/* empty css                                                              */import"./lodash-CrtkfJpY.js";const O={class:"bg-[#285a19] shadow p-4 flex justify-between items-center text-white"},z={class:"flex items-center space-x-4"},L={class:"relative inline-block text-left"},T={class:"flex items-center space-x-2"},Y=["src"],$={key:0,class:"absolute right-0 z-50 mt-2 w-48 bg-white rounded shadow-lg"},q={class:"w-full h-[727px] flex items-center justify-center bg-gray-200 px-4 sm:px-6 lg:px-8"},G={class:"w-1/2 max-w-4xl p-6 bg-white shadow-lg rounded-lg"},H={class:"text-center"},J=["src"],K={class:"mt-4 text-lg sm:text-xl font-semibold"},Q={class:"text-gray-600 text-sm sm:text-base"},W={class:"text-gray-600 text-sm sm:text-base"},X={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center px-4"},Z={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md relative"},ee={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},se={class:"bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto shadow-lg"},te={class:"space-y-3"},oe={class:"relative"},le={class:"relative"},me={__name:"Seller_Profile",setup(ae){const h=A();I();const o=U(()=>{var a;return((a=h.state.userData.data)==null?void 0:a.user)||{}}),r=E({first_name:o.value.first_name||"",middle_name:o.value.middle_name||"",last_name:o.value.last_name||"",email:o.value.email||"",phone_number:o.value.phone_number||""}),M=async()=>{var a,e;try{await h.dispatch("updateProfile",{id:consumerRaw.value.id,first_name:r.first_name,middle_name:r.middle_name,last_name:r.last_name,phone_number:r.phone_number,email:r.email}),C()}catch(t){if((e=(a=t.response)==null?void 0:a.data)!=null&&e.errors){const m=t.response.data.errors,c=Object.keys(m)[0];c&&alert(m[c][0])}else console.error("Error updating profile:",t),alert("An unexpected error occurred.")}},y=x(!1),D=()=>{y.value=!0};function C(){y.value=!1}const n=E({password:o.value.password||"",password_confirmation:o.value.password_confirmation||""}),w=x(!1),N=()=>{w.value=!w.value},b=x(!1),B=()=>{b.value=!b.value},_=x(!1),R=()=>{_.value=!0},j=()=>{_.value=!1},S=async()=>{var a,e;try{if(n.password!==n.password_confirmation){alert("Passwords do not match");return}await h.dispatch("updatePassword",{id:o.value.id,password:n.password,password_confirmation:n.password_confirmation}),j(),n.password="",n.password_confirmation=""}catch(t){if((e=(a=t.response)==null?void 0:a.data)!=null&&e.errors){const m=t.response.data.errors,c=Object.keys(m)[0];c&&alert(m[c][0])}else console.error("Error updating password:",t),alert("An unexpected error occurred.")}};return(a,e)=>(v(),g(F,null,[s("header",O,[e[7]||(e[7]=s("h1",{class:"text-lg sm:text-xl 2xl:ml-0 md:ml-10 2xs:ml-10 font-bold"},"My Profile",-1)),s("div",z,[s("div",L,[s("div",T,[s("img",{src:o.value.avatar,alt:"Profile",class:"w-10 h-10 rounded-full object-cover shadow-md"},null,8,Y),l(k(V),{icon:"uil:setting",width:"24",height:"24",class:"cursor-pointer text-white",onClick:a.toggleDropdown},null,8,["onClick"])]),a.dropdownVisible?(v(),g("div",$,[e[6]||(e[6]=s("a",{href:"/seller-profile",class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"}," Account Info ",-1)),s("button",{onClick:e[0]||(e[0]=(...t)=>a.logout&&a.logout(...t)),class:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100"}," Logout ")])):P("",!0)])])]),s("div",q,[s("div",G,[s("div",H,[s("img",{src:o.value.profilePic,alt:"Profile Picture",class:"w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-44 lg:h-44 mx-auto rounded-full"},null,8,J),s("h2",K,f(o.value.first_name)+" "+f(o.value.middle_name)+" "+f(o.value.last_name),1),s("p",Q,f(o.value.email),1),s("p",W,f(o.value.phone_number),1)]),s("div",{class:"flex justify-center gap-4 text-xs mt-6 sm:mt-10"},[s("button",{onClick:D,class:"px-6 max-w-xs sm:max-w-sm lg:max-w-md bg-green-800 text-white py-2 rounded-full hover:bg-green-600"}," Edit Profile "),s("button",{class:"bg-red-700 text-white px-2 py-2 rounded-full hover:bg-red-500 transition",onClick:R}," Change Password")])])]),y.value?(v(),g("div",X,[s("div",Z,[l(i,{class:"text-xl font-semibold mb-4"},{default:d(()=>e[8]||(e[8]=[u("Edit Profile")])),_:1}),l(i,{class:"block mb-2"},{default:d(()=>e[9]||(e[9]=[u("Name")])),_:1}),l(p,{modelValue:r.first_name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.first_name=t),class:"w-full p-2 border rounded mb-4",type:"text"},null,8,["modelValue"]),l(i,{class:"block mb-2"},{default:d(()=>e[10]||(e[10]=[u("Email")])),_:1}),l(p,{modelValue:r.email,"onUpdate:modelValue":e[2]||(e[2]=t=>r.email=t),class:"w-full p-2 border rounded mb-4",type:"email"},null,8,["modelValue"]),l(i,{class:"block mb-2"},{default:d(()=>e[11]||(e[11]=[u("Phone")])),_:1}),l(p,{modelValue:r.phone_number,"onUpdate:modelValue":e[3]||(e[3]=t=>r.phone_number=t),class:"w-full p-2 border rounded mb-4",type:"text"},null,8,["modelValue"]),s("div",{class:"flex justify-end gap-2 text-sm"},[s("button",{onClick:C,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:M,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])):P("",!0),_.value?(v(),g("div",ee,[s("div",se,[e[14]||(e[14]=s("h2",{class:"text-lg font-semibold mb-4"},"Change Password",-1)),s("div",te,[s("div",oe,[l(i,{class:"font-semibold"},{default:d(()=>e[12]||(e[12]=[u("*New Password")])),_:1}),l(p,{modelValue:n.password,"onUpdate:modelValue":e[4]||(e[4]=t=>n.password=t),type:w.value?"text":"password",placeholder:"Enter Your Password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:N},[l(k(V),{icon:w.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",le,[l(i,{class:"font-semibold"},{default:d(()=>e[13]||(e[13]=[u("*Re-enter Password")])),_:1}),l(p,{modelValue:n.password_confirmation,"onUpdate:modelValue":e[5]||(e[5]=t=>n.password_confirmation=t),type:b.value?"text":"password",placeholder:"Re-enter password",class:"w-full"},null,8,["modelValue","type"]),s("button",{type:"button",class:"absolute right-3 2xl:top-10 lg:top-10 md:top-11 2xs:top-12 text-gray-500",onClick:B},[l(k(V),{icon:b.value?"ic:twotone-visibility-off":"ic:twotone-visibility"},null,8,["icon"])])]),s("div",{class:"flex justify-end space-x-2 pt-2"},[s("button",{type:"button",onClick:j,class:"bg-gray-400 text-white py-2 px-4 rounded hover:bg-gray-500"}," Cancel "),s("button",{onClick:S,class:"bg-green-800 text-white py-2 px-4 rounded hover:bg-green-600"}," Save ")])])])])):P("",!0)],64))}};export{me as default};
