import{B}from"./BaseLabel-C_eLoLgN.js";import{_ as D}from"./Footer-DY8Cx-LT.js";import{_ as I}from"./Market_NavBar-BxMLbVdv.js";import{A as d,g as O,f as a,c as u,E as V,l as f,a as r,b as t,w as q,u as v,t as o,F as _,h as N,k as h,i as T,j as $,r as w,o as i,e as E,J as y}from"./index-DITtJx53.js";import"./Toast-CON0Qnhu.js";/* empty css                                                              */import"./BaseSearchField-PkV1gQds.js";import"./lodash-DJsiO634.js";const F={class:"flex flex-col min-h-screen"},G={class:"p-5 flex-grow"},M={key:0,class:"flex flex-wrap items-center gap-2 border-2 border-[#608C54] py-5 p-2 rounded-md shadow-md mt-4"},z={class:"mt-6 w-full mx-auto p-3 bg-white shadow-md border-2 border-[#608C54] rounded-lg"},A={class:"flex flex-wrap justify-between items-center mb-4 border-b pb-2"},J={class:"flex items-center space-x-2"},Q={class:"overflow-y-auto border rounded-md p-2 max-h-[30rem]"},R={class:"flex space-x-4"},U=["src"],W={class:"font-semibold"},H={class:"text-sm text-gray-500"},K={class:"grid grid-cols-3 gap-4 text-center w-full sm:w-1/2 text-sm font-medium"},X={class:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6 mt-6"},Y={class:"col-span-1 xl:col-span-2 pt-2"},Z={class:"flex flex-wrap gap-4"},tt={class:"border-t pt-4 mb-6"},et={class:"flex justify-between text-sm mb-2"},st={class:"flex justify-between text-sm mb-2"},ot={class:"flex justify-between text-lg font-bold"},lt=30,ft={__name:"Checkout",setup(nt){const c=T(),C=$(),k=d(()=>c.state.showLoading.state),l=d(()=>c.state.Consumer.checkout.data);console.log(l.value);function L(){c.dispatch("Consumer/getCheckoutList")}O(()=>{L()});const g=d(()=>l.value.reduce((n,e)=>n+e.price*e.quantity,0)),b=d(()=>l.value.reduce((n,e)=>n+lt*e.quantity,0)),S=d(()=>g.value+b.value),P=async()=>{const n=l.value.filter(e=>e.selected);if(n.length!==0){for(const e of n)try{await c.dispatch("Consumer/placeOrderSelected",{id:e.id})}catch(p){console.error("Checkout failed for item:",e.id,p)}C.push("/market")}},m=a(null);return a(""),a(""),a(""),a(""),a(""),(n,e)=>{const p=w("Loading"),j=w("Toast");return i(),u(_,null,[k.value?(i(),V(p,{key:0,class:"loading"})):f("",!0),r(j),r(I),t("div",F,[t("div",G,[r(B,{class:"text-3xl font-bold"},{default:q(()=>e[2]||(e[2]=[E("Check out")])),_:1}),l.value.length?(i(),u("div",M,[r(v(y),{icon:"lsicon:location-outline",width:"24",height:"24",style:{color:"#276d22"}}),e[3]||(e[3]=t("p",{class:"ml-2 font-semibold"},"Delivery address:",-1)),t("p",null,o(l.value[0].name),1),t("p",null,o(l.value[0].email),1),t("p",null,o(l.value[0].shipping_address),1),t("p",null,o(l.value[0].phone_number),1)])):f("",!0),t("div",z,[t("div",A,[t("div",J,[r(v(y),{icon:"streamline:store-1",width:"28",height:"28",style:{color:"#276d22"}}),e[4]||(e[4]=t("h2",{class:"text-xl font-bold"},"Product ordered",-1))]),e[5]||(e[5]=t("div",{class:"hidden sm:grid grid-cols-3 gap-10 text-gray-600 text-sm text-center font-semibold w-full sm:w-1/2 mt-2 sm:mt-0"},[t("p",null,"Unit price"),t("p",null,"Quantity"),t("p",null,"Item subtotal")],-1))]),t("div",Q,[(i(!0),u(_,null,N(l.value,s=>{var x;return i(),u("div",{key:s.id,class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4"},[t("div",R,[(x=s==null?void 0:s.product_img)!=null&&x.length?(i(),u("img",{key:0,src:s.product_img[0],alt:"Product Image",class:"w-20 h-20 rounded-md object-cover"},null,8,U)):f("",!0),t("div",null,[t("h3",W,o(s.product_name),1),t("p",H,"Variants: "+o(s.unit),1)])]),t("div",K,[t("p",null,"₱"+o(s.price),1),t("p",null,o(s.quantity),1),t("p",null,"₱"+o(s.price*s.quantity),1)])])}),128))]),t("div",X,[t("div",Y,[e[6]||(e[6]=t("h3",{class:"font-semibold mb-2"},"Payment method",-1)),t("div",Z,[t("button",{onClick:e[0]||(e[0]=s=>m.value="GCash"),class:h(["px-4 py-2 border rounded-md focus:outline-none transition",m.value==="GCash"?"bg-[#608C54] text-white":"bg-white text-black"])}," E-Wallet ",2),t("button",{onClick:e[1]||(e[1]=s=>m.value="COD"),class:h(["px-4 py-2 border rounded-md focus:outline-none transition",m.value==="COD"?"bg-[#608C54] text-white":"bg-white text-black"])}," COD ",2)])])]),t("div",tt,[t("div",et,[e[7]||(e[7]=t("span",null,"Merchandise Subtotal",-1)),t("span",null,"₱"+o(g.value),1)]),t("div",st,[e[8]||(e[8]=t("span",null,"Shipping Subtotal",-1)),t("span",null,"₱"+o(b.value),1)]),t("div",ot,[e[9]||(e[9]=t("span",null,"Total Payment",-1)),t("span",null,"₱"+o(S.value),1)])]),t("div",{class:"text-right"},[t("button",{onClick:P,class:"bg-[#608C54] text-white px-6 py-2 rounded-md hover:bg-gray-300"}," Place order ")])])]),r(D)])],64)}}};export{ft as default};
